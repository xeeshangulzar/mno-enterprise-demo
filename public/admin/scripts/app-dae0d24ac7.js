(function(){this.App=angular.module("frontendAdmin",["mnoEnterprise.defaultConfiguration","mnoEnterprise.configuration","ngAnimate","ngAria","ngCookies","ngMessages","restangular","ui.router","ui.bootstrap","toastr","ncy-angular-breadcrumb","platanus.inflector","smart-table","angularMoment","duScroll","ngPageTitle","mnoUiElements","pascalprecht.translate","ngSanitize"])}).call(this),function(){this.App.config(["$logProvider","toastrConfig",function(n,a){return n.debugEnabled(!0),a.timeOut=3e3,a.positionClass="toast-top-right",a.preventDuplicates=!0,a.progressBar=!0}]).config(["$httpProvider",function(n){return n.interceptors.push(["$q","$window","$injector","$log",function(n,a,e,t){return{responseError:function(o){var s;return 401===o.status&&(s=e.get("toastr"),a.location.href="/",s.error("You are no longer connected or not an administrator, you will be redirected to the dashboard."),t.error("User is not connected!")),n.reject(o)}}}])}]).config(["$translateProvider","LOCALES",function(n,a){return n.useStaticFilesLoader({prefix:"locales/",suffix:".json"}),n.preferredLanguage(a.preferredLanguage),n.fallbackLanguage(a.fallbackLanguage),n.useMissingTranslationHandlerLog(),n.useSanitizeValueStrategy("sanitize"),n.addInterpolation("$translateMessageFormatInterpolation")}]).config(["$breadcrumbProvider",function(n){return n.setOptions({template:'<ol class="breadcrumb">\n  <li ng-repeat="step in steps" ng-class="{active: $last}" ng-switch="$last || !!step.abstract">\n    <a ng-switch-when="false" href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel | translate}}</a>\n  <span ng-switch-when="true">{{step.ncyBreadcrumbLabel | translate}}</span>\n  </li>\n</ol>'})}])}.call(this),function(){this.App.constant("USER_ROLES",[{value:"Member",label:"mnoe_admin_panel.constants.user_roles.member"},{value:"Power User",label:"mnoe_admin_panel.constants.user_roles.power_user"},{value:"Admin",label:"mnoe_admin_panel.constants.user_roles.admin"},{value:"Super Admin",label:"mnoe_admin_panel.constants.user_roles.super_admin"}]).constant("ADMIN_ROLES",[{value:"admin",label:"mnoe_admin_panel.constants.admin_roles.admin"},{value:"staff",label:"mnoe_admin_panel.constants.admin_roles.staff"}]).constant("STAFF_PAGE_AUTH",["admin"]).constant("OBS_KEYS",{userChanged:"userListChanged",staffChanged:"staffListChanged",staffAdded:"staffAdded"}).constant("LOCALES",{locales:[{id:"en-AU",name:"English (Australia)"}],preferredLanguage:"en-AU",fallbackLanguage:"en-AU"})}.call(this),function(){angular.module("mnoEnterprise.defaultConfiguration",[]).constant("REVIEWS_CONFIG",{enabled:!1}).constant("ADMIN_PANEL_CONFIG",{})}.call(this),function(){this.App.config(["$stateProvider","$urlRouterProvider","MnoeAdminConfigProvider",function(n,a,e){"ngInject";var t;return n.state("dashboard",{abstract:!0,templateUrl:"app/views/dashboard.layout.html",controller:"DashboardController",controllerAs:"main"}).state("dashboard.home",{data:{pageTitle:"Home"},url:"/home",templateUrl:"app/views/home/home.html",controller:"HomeController",controllerAs:"vm",ncyBreadcrumb:{label:"mnoe_admin_panel.dashboard.home.title"}}).state("dashboard.reviews",{data:{pageTitle:"Reviews"},url:"/reviews",templateUrl:"app/views/reviews/reviews.html",controllerAs:"vm",ncyBreadcrumb:{label:"mnoe_admin_panel.dashboard.reviews.title"},resolve:{skip:["MnoeCurrentUser",function(n){return n.skipIfNotAdmin()}],skipCondition:["RoutingHelper","REVIEWS_CONFIG",function(n,a){return n.skipUnlessCondition(a&&a.enabled)}]}}).state("dashboard.customers",{data:{pageTitle:"Customers"},url:"/customers",templateUrl:"app/views/customers/customers.html",controller:"CustomersController",controllerAs:"vm",ncyBreadcrumb:{label:"mnoe_admin_panel.dashboard.customers.title"}}).state("dashboard.customers.user",{data:{pageTitle:"User"},url:"^/user/:userId",views:{"@dashboard":{templateUrl:"app/views/user/user.html",controller:"UserController",controllerAs:"vm"}},ncyBreadcrumb:{label:"mnoe_admin_panel.dashboard.user.title"}}).state("dashboard.customers.organization",{data:{pageTitle:"Organization"},url:"^/organization/:orgId",views:{"@dashboard":{templateUrl:"app/views/organization/organization.html",controller:"OrganizationController",controllerAs:"vm"}},ncyBreadcrumb:{label:"mnoe_admin_panel.dashboard.organization.title"}}).state("dashboard.customers.connect-app",{url:"^/customers/:orgId/connect-apps",views:{"@dashboard":{templateUrl:"app/views/customers/connect-app/connect-app.html",controller:"ConnectAppController",controllerAs:"vm"}},ncyBreadcrumb:{label:"mnoe_admin_panel.dashboard.customers.connect_app.title"}}),t=e.$get(),t.isAuditLogEnabled()&&n.state("dashboard.audit-log",{data:{pageTitle:"Audit Log"},url:"/audit-log",templateUrl:"app/views/audit-log/audit-log.html",controller:"AuditLogController",controllerAs:"vm",ncyBreadcrumb:{label:"mnoe_admin_panel.dashboard.audit_log.title"}}),t.isFinanceEnabled()&&n.state("dashboard.finance",{data:{pageTitle:"Finance"},url:"/finance",templateUrl:"app/views/finance/finance.html",controller:"FinanceController",controllerAs:"vm",ncyBreadcrumb:{label:"mnoe_admin_panel.dashboard.finance.title"}}),t.isStaffEnabled()&&n.state("dashboard.staff",{data:{pageTitle:"Staff"},url:"/staff",templateUrl:"app/views/staff/staff.html",controller:"StaffController",controllerAs:"vm",ncyBreadcrumb:{label:"mnoe_admin_panel.dashboard.staff.title"},resolve:{skip:["MnoeCurrentUser",function(n){return n.skipIfNotAdmin()}]}}),t.isOrganizationManagementEnabled()&&n.state("dashboard.customers.create-step-1",{url:"^/customers/create-customer",views:{"@dashboard":{templateUrl:"app/views/customers/create-step-1/create-step-1.html",controller:"CreateStep1Controller",controllerAs:"vm"}},ncyBreadcrumb:{label:"mnoe_admin_panel.dashboard.customers.create_customer.title"}}),a.otherwise("/home")}])}.call(this),function(){this.App.run(["$rootScope","APP_NAME",function(n,a){return n.app_name=a}]).run(["$rootScope",function(n){return n.$on("$viewContentLoaded",function(){return window.scrollTo(0,0)})}]).run(["$templateCache",function(n){return n.put("directives/toast/toast.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()">\n  <div ng-switch on="allowHtml">\n    <div ng-switch-default ng-if="title" class="{{titleClass}}" aria-label="{{title | translate}}">{{title | translate}}</div>\n    <div ng-switch-default class="{{messageClass}}" aria-label="{{message | translate:extraData}}">{{message | translate:extraData}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n  <progress-bar ng-if="progressBar"></progress-bar>\n</div>')}])}.call(this),function(){this.App.controller("DashboardController",["$scope","$cookies","$sce","MnoeMarketplace","MnoErrorsHandler","MnoeCurrentUser","MnoeAdminConfig","STAFF_PAGE_AUTH","REVIEWS_CONFIG",function(n,a,e,t,o,s,i,r,l){"ngInject";var d;d=this,d.errorHandler=o,d.staffPageAuthorized=r,d.isReviewingEnabled=l&&l.enabled,d.isFinanceEnabled=i.isFinanceEnabled(),d.adminConfig=i,d.trustSrc=function(n){return e.trustAsResourceUrl(n)},s.getUser().then(d.user=s.user),d.exit=function(){return s.logout()}}])}.call(this),function(){this.App.service("MnoAppsInstances",function(){var n;return n=this,this.isConnected=function(a){return"cube"===a.stack||"cloud"===a.stack||n.isOauthConnected(a)},this.isOauthConnected=function(n){return"connector"===n.stack&&n.oauth_keys_valid},this.oAuthConnectPath=function(n,a){var e;return null==a&&(a=""),e=window.encodeURIComponent(""+location.pathname+location.hash),"/mnoe/webhook/oauth/"+n.uid+"/authorize?redirect_path="+e+"&"+a},this.canBeDataSynced=function(n){return"connector"===n.stack&&n.oauth_keys_valid},this.dataSyncPath=function(n){return"/mnoe/webhook/oauth/"+n.uid+"/sync"},this.canBeDisconnected=function(n){return"connector"===n.stack&&n.oauth_keys_valid},this.disconnectPath=function(n){return"/mnoe/webhook/oauth/"+n.uid+"/disconnect"},this})}.call(this),function(){this.App.service("MnoConfirm",["$uibModal",function(n){var a,e,t;return a=this,t={closeButtonText:"mnoe_admin_panel.dashboard.mno_confirm.close",closeButtonTextExtraData:{},actionButtonText:"mnoe_admin_panel.dashboard.mno_confirm.ok",actionButtonTextExtraData:{},headerText:"mnoe_admin_panel.dashboard.mno_confirm.proceed",headerTextExtraData:{},bodyText:"mnoe_admin_panel.dashboard.mno_confirm.perform",bodyTextExtraData:{}},e={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"app/components/mno-confirm/mno-confirm.html"},this.showModal=function(n,e){return null==e&&(e=null),null==e&&(e={}),e.backdrop="static",a.show(n,e)},this.show=function(a,o){var s,i;return null==o&&(o=null),s={},i={},angular.extend(i,t,a),angular.extend(s,e,o),s.controller||(s.controller=["$scope","$uibModalInstance",function(n,a){"ngInject";return n.modalOptions=i,n.modalOptions.ok=function(n){return a.close(n)},n.modalOptions.close=function(n){return a.dismiss("cancel")}}]),n.open(s).result},this}])}.call(this),function(){this.App.service("MnoErrorsHandler",["$log",function(n){var a;return this,a=null,this.processServerError=function(e,t){var o;if(n.error("An error occurred:",e),!_.startsWith(e.data,"<!DOCTYPE html>"))return 400<=(o=e.status)&&o<=499?(a=e,_.each(a.data,function(a,e){return _.each(a,function(){return null!=t[e]?t[e].$setValidity("server",!1):n.error("MnoErrorsHandler: cannot find field:"+e)})})):void 0},this.errorMessage=function(n){var e;return e=[],null!=a&&_.each(a.data[n],function(n){return e.push(n)}),e.join(", ")},this.resetErrors=function(n){if(null!=a)return _.each(a.data,function(a,e){return _.each(a,function(){if(null!=n[e])return n[e].$setValidity("server",null)})}),a=null},this.onlyServerError=function(n){return _.every(n.$error,function(n,a){return"server"===a})},this}])}.call(this),function(){this.App.constant("ITEMS_PER_PAGE",[10,20,50,100]),this.App.directive("mnoPagination",["ITEMS_PER_PAGE",function(n){return{restrict:"AE",scope:{totalItems:"=",onChangeCb:"&",nbItemsValues:"=?",nbItems:"=",page:"=",isLoading:"=?"},templateUrl:"app/components/mno-pagination/mno-pagination.html",link:function(a){return a.pagination={maxPages:7},a.nbItemsValues||(a.nbItemsValues=n),a.onPageChange=function(){return a.onChangeCb({nbItems:a.nbItems,page:a.page})}}}}])}.call(this),function(){this.App.factory("MnoeApiSvc",["$log","Restangular","inflector",function(n,a,e){return a.withConfig(function(n){return n.setBaseUrl("/mnoe/jpi/v1"),n.setDefaultHeaders({Accept:"application/json"}),n.setFullResponse(!0),n.addResponseInterceptor(function(n,a,t,o,s,i){var r;return _.startsWith(t,"/")?n:(r=null,"getList"===a?r=n[t]:"get"===a||"put"===a||"post"===a?(t=e.singularize(t),r=n[t]):r=n,r)})})}])}.call(this),function(){this.App.service("MnoeMarketplace",["$log","MnoeApiSvc",function(n,a){var e,t;return this,e=a.oneUrl("/marketplace"),t=null,this.getApps=function(){return null!=t?t:t=e.get()},this}])}.call(this),function(){this.App.component("mnoeAuditEventsList",{templateUrl:"app/components/mnoe-audit-events-list/mnoe-audit-events-list.html",bindings:{},controller:["$log","MnoeAuditEvents",function(n,a){var e,t,o;o=this,o.events={search:{},sort:"created_at.desc",nbItems:20,offset:0,page:1,list:[],pageChangedCb:function(n,a){return o.events.nbItems=n,o.events.page=a,o.events.offset=(a-1)*n,e(n,o.events.offset)}},o.callServer=function(n){return o.events.sort=t(n.sort),e(o.events.nbItems,o.events.offset,o.events.sort)},t=function(n){var a;return null==n&&(n={}),a="created_at.desc",n.predicate&&(a=n.predicate,n.reverse?a+=".desc":a+=".asc"),a},e=function(n,e,t){return null==t&&(t=o.events.sort),o.events.loading=!0,a.list(n,e,t).then(function(n){return o.events.totalItems=n.headers("x-total-count"),o.events.list=n.data}).finally(function(){return o.events.loading=!1})}}]})}.call(this),function(){this.App.factory("MnoeAdminConfig",["$log","ADMIN_PANEL_CONFIG",function(n,a){return this,this.isAuditLogEnabled=function(){return!a.audit_log||a.audit_log.enabled},this.isImpersonationEnabled=function(){return!a.impersonation||!a.impersonation.disabled},this.isStaffEnabled=function(){return null==a.staff||a.staff.enabled},this.isFinanceEnabled=function(){return null==a.finance||a.finance.enabled},this.isAppManagementEnabled=function(){return null==a.apps_management||a.apps_management.enabled},this.isOrganizationManagementEnabled=function(){return null==a.customer_management||null==a.customer_management.organization||a.customer_management.organization.enabled},this.isUserManagementEnabled=function(){return null==a.customer_management||null==a.customer_management.user||a.customer_management.user.enabled},this}])}.call(this),function(){this.App.directive("mnoeOrganizationsList",["$filter","$log","MnoeOrganizations",function(n,a,e){return{restrict:"E",scope:{list:"="},templateUrl:"app/components/mnoe-organizations-list/mnoe-organizations-list.html",link:function(t,o,s){var i,r,l,d,c;return t.state=s.view,t.organizations={search:"",nbItems:10,page:1,pageChangedCb:function(n,a){var e;return t.organizations.nbItems=n,t.organizations.page=a,e=(a-1)*n,r(n,e)}},r=function(n,a,o){return null==o&&(o="name"),t.organizations.loading=!0,e.list(n,a,o).then(function(n){return t.organizations.totalItems=n.headers("x-total-count"),t.organizations.list=n.data}).then(function(){return t.organizations.loading=!1})},t.switchState=function(){return t.state=s.view="all"===s.view?"last":"all",i()},i=function(){return"all"===s.view?(l(),r(t.organizations.nbItems,0)):"last"===s.view?(d(),r(t.organizations.nbItems,0,"created_at.desc")):a.error('Value of attribute view can only be "all" or "last"')},l=function(){return t.organizations.widgetTitle="mnoe_admin_panel.dashboard.organization.widget.list.all_organizations.title",t.organizations.switchLinkTitle="mnoe_admin_panel.dashboard.organization.widget.list.all_users.switch_link_title"},d=function(){return t.organizations.widgetTitle="mnoe_admin_panel.dashboard.organization.widget.list.last_organizations.title",t.organizations.switchLinkTitle="mnoe_admin_panel.dashboard.organization.widget.list.last_organizations.switch_link_title"},t.searchChange=function(){return t.organizations.search.length>=3?(t.searchMode=!0,c(t.organizations.search)):t.searchMode?(t.searchMode=!1,i()):void 0},c=function(a){var o;return t.organizations.loading=!0,t.organizations.widgetTitle="mnoe_admin_panel.dashboard.organization.widget.list.search_users.title",delete t.organizations.switchLinkTitle,a=t.organizations.search.toLowerCase(),o={"name.like":"%"+a+"%"},e.search(o).then(function(a){return t.organizations.totalItems=a.headers("x-total-count"),t.organizations.list=n("orderBy")(a.data,"name")}).finally(function(){return t.organizations.loading=!1})},i()}}}])}.call(this),function(){this.App.directive("mnoeOrganizationsLocalList",["$filter","$log",function(n,a){return{restrict:"E",scope:{list:"="},templateUrl:"app/components/mnoe-organizations-local-list/mnoe-organizations-local-list.html",link:function(e,t,o){var s,i,r,l;return e.organizations={displayList:[],widgetTitle:"mnoe_admin_panel.dashboard.organization.widget.local_list.loading_users.title",search:""},i=function(){return e.organizations.widgetTitle="mnoe_admin_panel.dashboard.organization.widget.local_list.all_organizations.title",e.organizations.switchLinkTitle="mnoe_admin_panel.dashboard.organization.widget.local_list.all_organizations.switch_link_title",e.organizations.displayList=n("orderBy")(e.list,"email")},r=function(){return e.organizations.widgetTitle="mnoe_admin_panel.dashboard.organization.widget.local_list.last_organizations.title",e.organizations.switchLinkTitle="mnoe_admin_panel.dashboard.organization.widget.local_list.last_organizations.switch_link_title",e.organizations.displayList=n("orderBy")(e.list,"-created_at"),e.organizations.displayList=n("limitTo")(e.organizations.displayList,10)},l=function(){var a;return e.organizations.widgetTitle="mnoe_admin_panel.dashboard.organization.widget.local_list.search_organizations.title",delete e.organizations.switchLinkTitle,a=e.organizations.search.toLowerCase(),e.organizations.displayList=_.filter(e.list,function(n){var e,t,o;return n.email&&(e=_.contains(n.email.toLowerCase(),a)),n.name&&(t=_.contains(n.name.toLowerCase(),a)),n.surname&&(o=_.contains(n.surname.toLowerCase(),a)),e||t||o}),e.organizations.displayList=n("orderBy")(e.organizations.displayList,"email")},s=function(){return"all"===o.view?i():"last"===o.view?r():a.error('Value of attribute view can only be "all" or "last"')},e.switchState=function(){return"all"===o.view?o.view="last":o.view="all",s()},e.searchChange=function(){return""===e.organizations.search?s():l()},e.$watch("list",function(n){if(n)return s()},!0)}}}])}.call(this),function(){angular.module("frontendAdmin").controller("CommentEditModal",["$scope","$uibModalInstance","review",function(n,a,e){console.log(e),n.review=e,n.closeModal=function(){return a.dismiss()},n.submitIteraction=function(){return a.close(e)}}])}.call(this),function(){angular.module("frontendAdmin").controller("CommentModal",["$scope","$uibModalInstance",function(n,a){n.commentText="",n.closeModal=function(){return a.dismiss()},n.submitIteraction=function(){return a.dismiss()}}])}.call(this),function(){angular.module("frontendAdmin").controller("FeedbackReplyModal",["$scope","$uibModalInstance",function(n,a){n.replyText="",n.closeModal=function(){return a.dismiss()},n.submitIteraction=function(){return a.close(n.replyText)}}])}.call(this),function(){this.App.directive("mnoeReviewsList",["$filter","$log","$uibModal","MnoeReviews",function(n,a,e,t){return{restric:"E",scope:{},templateUrl:"app/components/mnoe-reviews-list/mnoe-reviews-list.html",link:function(n){var a;n.editmode=[],n.listOfReviews=[],n.statuses=[{value:"approved",label:"mnoe_admin_panel.dashboard.reviews_list.status_label.approved"},{value:"rejected",label:"mnoe_admin_panel.dashboard.reviews_list.status_label.rejected"}],n.openCommentModal=function(){return e.open({templateUrl:"app/components/mnoe-reviews-list/comment-modal.html",controller:"CommentModal"})},n.openEditModal=function(n){return e.open({templateUrl:"app/components/mnoe-reviews-list/comment-edit-modal.html",controller:"CommentEditModal",resolve:{review:n}}).result.then(function(n){return t.updateDescription(n).then(function(n){})})},n.openFeedbackReplyModal=function(a){return e.open({templateUrl:"app/components/mnoe-reviews-list/feedback-reply-modal.html",controller:"FeedbackReplyModal"}).result.then(function(e){return t.replyFeedback(a.id,e).then(function(a){return n.listOfReviews.unshift(a.data.app_comment)})})},n.openQuestionReplyModal=function(a){return e.open({templateUrl:"app/components/mnoe-reviews-list/question-reply-modal.html",controller:"QuestionReplyModal"}).result.then(function(e){return t.replyQuestion(a.id,e).then(function(a){return n.listOfReviews.unshift(a.data.app_answer)})})},a=function(){return t.list().then(function(a){return n.listOfReviews=a.data})},n.update=function(a){return t.updateRating(a).then(function(e){return delete n.editmode[a.id]})},a()}}}])}.call(this),function(){angular.module("frontendAdmin").controller("QuestionReplyModal",["$scope","$uibModalInstance",function(n,a){n.replyText="",n.closeModal=function(){return a.dismiss()},n.submitIteraction=function(){return a.close(n.replyText)}}])}.call(this),function(){this.App.component("mnoeStaffsList",{templateUrl:"app/components/mnoe-staffs-list/mnoe-staffs-list.html",bindings:{view:"@"},controller:["$filter","$log","MnoeUsers","MnoeCurrentUser","MnoConfirm","MnoeObservables","ADMIN_ROLES","OBS_KEYS","toastr",function(n,a,e,t,o,s,i,r,l){var d,c,m,u,p,f;f=this,f.listOfStaff=[],f.callServer=function(n){var a,e;return e=p(n.sort),a=u(n.search),d(f.staff.nbItems,f.staff.offset,e,a)},p=function(n){var a;return null==n&&(n={}),a="surname",n.predicate&&(a=n.predicate,n.reverse?a+=".desc":a+=".asc"),f.staff.sort=a,a},u=function(n){var a,e,t,o;if(null==n&&(n={}),t={},n.predicateObject){e=n.predicateObject;for(a in e)o=e[a],"admin_role"===a?t["where[admin_role.in][]"]=[o]:t["where["+a+".like]"]=o+"%"}return f.staff.search=t,t},f.state=f.view,f.getAdminRoleLabel=function(n){return _.find(f.staff.roles,function(a){return a.value===n}).label},f.staff={editmode:[],search:{},sort:"surname",nbItems:10,page:1,roles:i,pageChangedCb:function(n,a){var e;return f.staff.nbItems=n,f.staff.page=a,e=(a-1)*n,d(n,e)},update:function(n){return e.updateStaff(n).then(function(a){return p(),u(),delete f.staff.editmode[n.id],t.refreshUser()},function(n){return a.error("Error while saving user",n),l.error("mnoe_admin_panel.dashboard.staff.widget.list.toastr_error")})},remove:function(n){var a;return a={closeButtonText:"mnoe_admin_panel.dashboard.staff.modal.remove_staff.cancel",actionButtonText:"mnoe_admin_panel.dashboard.staff.modal.remove_staff.delete",headerText:"mnoe_admin_panel.dashboard.staff.modal.remove_staff.proceed",headerTextExtraData:{staff_name:n.name+" "+n.surname},bodyText:"mnoe_admin_panel.dashboard.staff.modal.remove_staff.perform"},o.showModal(a).then(function(){return e.removeStaff(n.id).then(function(){return l.success("mnoe_admin_panel.dashboard.staff.widget.list.toastr_success",{extraData:{staff_name:n.name+" "+n.surname}})})})}},d=function(n,a,t,o){return null==t&&(t=f.staff.sort),null==o&&(o=f.staff.search),f.staff.loading=!0,e.staffs(n,a,t,o).then(function(n){return f.staff.totalItems=n.headers("x-total-count"),f.listOfStaff=n.data,f.staff.oneAdminLeft=1===_.filter(n.data,{admin_role:"admin"}).length}).finally(function(){return f.staff.loading=!1})},d(f.staff.nbItems,0).then(function(){return s.registerCb(r.staffAdded,function(){return d(f.staff.nbItems,f.staff.offset)}),s.registerCb(r.staffChanged,function(){return d(f.staff.nbItems,f.staff.offset)})}),c=function(){return d(f.staff.nbItems,f.staff.offset)},m=function(){return d(f.staff.nbItems,f.staff.offset)},s.registerCb(r.staffAdded,c),s.registerCb(r.staffChanged,m),this.$onDestroy=function(){return s.unsubscribe(r.staffAdded,c),s.unsubscribe(r.staffChanged,m)}}]})}.call(this),function(){this.App.directive("mnoeUsersList",["$filter","$log","$translate","MnoeUsers",function(n,a,e,t){return{restrict:"E",scope:{},templateUrl:"app/components/mnoe-users-list/mno-users-list.html",link:function(e,o,s){var i,r,l,d,c;return e.state=s.view,e.users={search:"",nbItems:10,page:1,pageChangedCb:function(n,a){var t;return e.users.nbItems=n,e.users.page=a,t=(a-1)*n,r(n,t)}},r=function(n,a,o){return null==o&&(o="surname"),e.users.loading=!0,t.list(n,a,o).then(function(n){return e.users.totalItems=n.headers("x-total-count"),e.users.list=n.data}).finally(function(){return e.users.loading=!1})},e.switchState=function(){return e.state=s.view="all"===s.view?"last":"all",i()},i=function(){return"all"===s.view?(l(),r(e.users.nbItems,0)):"last"===s.view?(d(),r(10,0,"created_at.desc")):a.error('Value of attribute view can only be "all" or "last"')},l=function(){return e.users.widgetTitle="mnoe_admin_panel.dashboard.users.widget.list.all_users.title",e.users.switchLinkTitle="mnoe_admin_panel.dashboard.users.widget.list.all_users.switch_link_title"},d=function(){return e.users.widgetTitle="mnoe_admin_panel.dashboard.users.widget.list.last_users.title",e.users.switchLinkTitle="mnoe_admin_panel.dashboard.users.widget.list.last_users.switch_link_title"},e.searchChange=function(){return e.users.search.length>=3?(e.searchMode=!0,c(e.users.search)):e.searchMode?(e.searchMode=!1,i()):void 0},c=function(a){var o;return e.users.loading=!0,e.users.widgetTitle="mnoe_admin_panel.dashboard.users.widget.list.search_users.title",delete e.users.switchLinkTitle,a=e.users.search.toLowerCase(),o={"surname.like":a+"%","name.like":a+"%","email.like":"%"+a+"%"},t.search(o).then(function(a){return e.users.totalItems=a.headers("x-total-count"),e.users.list=n("orderBy")(a.data,"email")}).finally(function(){return e.users.loading=!1})},i()}}}])}.call(this),function(){this.App.directive("mnoeUsersLocalList",["$window","$filter","$log","toastr","MnoeAdminConfig","MnoeUsers","MnoErrorsHandler",function(n,a,e,t,o,s,i){return{restrict:"E",scope:{list:"=",organization:"="},templateUrl:"app/components/mnoe-users-local-list/mnoe-users-local-list.html",link:function(r,l,d){var c,m,u,p;return r.users={displayList:[],widgetTitle:"mnoe_admin_panel.dashboard.users.widget.local_list.loading_users.title",search:""},r.isImpersonationEnabled=o.isImpersonationEnabled(),m=function(){return r.users.widgetTitle="mnoe_admin_panel.dashboard.users.widget.local_list.all_users.title",r.users.switchLinkTitle="mnoe_admin_panel.dashboard.users.widget.local_list.all_users.switch_link_title",r.users.displayList=a("orderBy")(r.list,"email")},u=function(){return r.users.widgetTitle="mnoe_admin_panel.dashboard.users.widget.local_list.last_users.title",r.users.switchLinkTitle="mnoe_admin_panel.dashboard.users.widget.local_list.last_users.switch_link_title",r.users.displayList=a("orderBy")(r.list,"-created_at"),r.users.displayList=a("limitTo")(r.users.displayList,10)},p=function(){var n;return r.users.widgetTitle="mnoe_admin_panel.dashboard.users.widget.local_list.search_users.title",delete r.users.switchLinkTitle,n=r.users.search.toLowerCase(),r.users.displayList=_.filter(r.list,function(a){var e,t,o;return a.email&&(e=_.contains(a.email.toLowerCase(),n)),a.name&&(t=_.contains(a.name.toLowerCase(),n)),a.surname&&(o=_.contains(a.surname.toLowerCase(),n)),e||t||o}),r.users.displayList=a("orderBy")(r.users.displayList,"email")},c=function(){return"all"===d.view?m():"last"===d.view?u():e.error('Value of attribute view can only be "all" or "last"')},r.switchState=function(){return"all"===d.view?d.view="last":d.view="all",c()},r.searchChange=function(){return""===r.users.search?c():p()},r.sendInvitation=function(n){return n.isSendingInvite=!0,s.inviteUser(r.organization,n).then(function(a){return t.success("mnoe_admin_panel.dashboard.users.widget.local_list.toastr_success",{extraData:{username:n.name+" "+n.surname}}),n.status=a.data.user.status},function(a){return t.error("mnoe_admin_panel.dashboard.users.widget.local_list.toastr_error",{extraData:{username:n.name+" "+n.surname}}),i.processServerError(a)}).finally(function(){return n.isSendingInvite=!1})},r.impersonateUser=function(a){var e,t;if(a)return e=window.encodeURIComponent(""+location.pathname+location.hash),t="/mnoe/impersonate/user/"+a.id+"?redirect_path="+e,n.location.href=t},r.$watch("list",function(n){if(n)return c()},!0)}}}])}.call(this),function(){this.App.service("MnoeObservables",function(){var n;n={},this.registerCb=function(a,e){return _.isEmpty(n[a])&&(n[a]=[]),n[a].push(e)},this.notifyObservers=function(a,e){return _.forEach(n[a],function(n){return n(e)})},this.unsubscribe=function(a,e){if(_.pull(n[a],e),_.isEmpty(n[a]))return delete n[a]}})}.call(this),function(){this.App.service("RoutingHelper",["$state","$q",function(n,a){return this,this.skipUnlessCondition=function(e){return e?a.resolve():($timeout(function(){return n.go("dashboard.home")}),a.reject())},this}])}.call(this),function(){this.App.controller("AuditLogController",function(){"ngInject"})}.call(this),function(){this.App.controller("CustomersController",["$scope","$uibModal","MnoeUsers","MnoeOrganizations","MnoeObservables","OBS_KEYS",function(n,a,e,t,o,s){"ngInject";var i,r;r=this,r.users={},r.organizations={},r.invoices={},r.inviteUserModal=function(){return a.open({templateUrl:"app/views/customers/invite-user-modal/invite-user.html",controller:"InviteUserController",controllerAs:"vm"})},i=function(n){r.users.totalCount=n.headers("x-total-count")},o.registerCb(s.userChanged,i),t.registerListChangeCb(function(n){return n.then(function(n){return r.organizations.totalCount=n.headers("x-total-count")})}),n.$on("$destroy",function(){return o.unsubscribe(s.userChanged,i)})}])}.call(this),function(){this.App.controller("FinanceController",["$filter","MnoeInvoices","MnoeTenantInvoices","MnoeOrganizations",function(n,a,e,t){"ngInject";var o;o=this,o.invoices={},o.organizations={},a.currentBillingAmount().then(function(n){return o.invoices.currentBillingAmount=n.data}),a.lastInvoicingAmount().then(function(n){return o.invoices.lastInvoicingAmount=n.data}),a.lastPortfolioAmount().then(function(n){return o.invoices.lastPortfolioAmount=n.data}),a.lastCommissionAmount().then(function(n){return o.invoices.lastCommissionAmount=n.data}),e.list().then(function(a){return o.invoices.tenantInvoices=a.data,o.invoices.tenantInvoices=n("orderBy")(o.invoices.tenantInvoices,"-started_at")}),t.inArrears().then(function(a){return o.organizations.inArrears=a.data,_.forEach(o.organizations.inArrears,function(n){return n.category=_.capitalize(n.category.replace("_"," "))}),o.organizations.inArrears=n("orderBy")(o.organizations.inArrears,"-started_at")})}])}.call(this),function(){this.App.controller("HomeController",["moment","MnoeUsers","MnoeOrganizations","MnoeInvoices","MnoeAdminConfig",function(n,a,e,t,o){"ngInject";var s;s=this,s.users={},s.organizations={},s.invoices={},a.count().then(function(n){return s.users.kpi=n.data}),e.count().then(function(n){return s.organizations.kpi=n.data}),o.isFinanceEnabled()&&t.lastInvoicingAmount().then(function(n){return s.invoices.lastInvoicingAmount=n.data}),o.isFinanceEnabled()&&t.outstandingAmount().then(function(n){return s.invoices.outstandingAmount=n.data})}])}.call(this),function(){this.App.controller("OrganizationController",["$filter","$stateParams","$uibModal","toastr","MnoeOrganizations","MnoeUsers","MnoAppsInstances",function(n,a,e,t,o,s,i){"ngInject";var r;return r=this,r.orgId=a.orgId,r.users={},r.hasDisconnectedApps=!1,r.status={},r.users.createUserModal=function(){var n;return n=e.open({templateUrl:"app/views/organization/create-user-modal/create-user.html",controller:"CreateUserController",controllerAs:"vm",resolve:{organization:r.organization}}),n.result.then(function(n){return r.organization.members.push(n)})},o.get(a.orgId).then(function(a){return r.organization=a.data.plain(),r.organization.invoices=n("orderBy")(r.organization.invoices,"-started_at"),r.updateStatus()}),r.updateStatus=function(){return r.status={},_.map(r.organization.active_apps,function(n){return r.status[n.nid]=i.isConnected(n)}),r.hasDisconnectedApps=!1 in _.countBy(r.status)},r.openAddAppModal=function(){var n;return n=e.open({templateUrl:"app/views/organization/add-app-modal/add-app-modal.html",controller:"AddAppModalCtrl",controllerAs:"vm",backdrop:"static",windowClass:"add-app-modal",size:"lg",resolve:{organization:r.organization}}),n.result.then(function(n){return r.organization=angular.copy(n),r.updateStatus()})},r.openRemoveAppModal=function(n,a){var t;return t=e.open({templateUrl:"app/views/organization/remove-app-modal/remove-app-modal.html",controller:"RemoveAppModalCtrl",controllerAs:"vm",backdrop:"static",windowClass:"remove-app-modal",size:"md",resolve:{app:n}}),t.result.then(function(n){if(n)return r.organization.active_apps.splice(a,1),r.updateStatus()})},r}])}.call(this),function(){this.App.controller("StaffController",["$filter","$stateParams","$uibModal","toastr","MnoeUsers","MnoAppsInstances",function(n,a,e,t,o,s){"ngInject";var i;i=this,i.staff={createModal:function(){return e.open({templateUrl:"app/views/staff/create-staff-modal/create-staff.html",controller:"CreateStaffController",controllerAs:"vm"})}},i.displayed=[],i.callServer=function(n){return console.log(n),i.isLoading=!1}}])}.call(this),function(){this.App.controller("UserController",["$stateParams","$window","MnoeUsers",function(n,a,e){"ngInject";var t;t=this,e.get(n.userId).then(function(n){return t.user=n.data}),t.impersonateUser=function(){var n,e;if(t.user)return n=window.encodeURIComponent(""+location.pathname+location.hash),e="/mnoe/impersonate/user/"+t.user.id+"?redirect_path="+n,a.location.href=e}}])}.call(this),function(){this.App.factory("MnoeAdminApiSvc",["MnoeApiSvc",function(n){return n.all("admin")}])}.call(this),function(){
this.App.service("MnoeAppInstances",["MnoeAdminApiSvc","toastr",function(n,a){return this,this.terminate=function(e){return n.one("app_instances",e).remove().then(function(n){},function(n){return a.error("mnoe_admin_panel.dashboard.organization.remove_app.toastr_error")})},this}])}.call(this),function(){this.App.service("MnoeAuditEvents",["MnoeAdminApiSvc",function(n){var a,e;return this,this.list=function(e,t,o){var s;return s=n.all("audit_events").getList({order_by:o,limit:e,offset:t}).then(function(n){return a(s),n})},e=[],this.registerListChangeCb=function(n){return e.push(n)},a=function(n){return _.forEach(e,function(a){return a(n)})},this}])}.call(this),function(){this.App.service("MnoeCurrentUser",["$window","$state","$q","$timeout","MnoeApiSvc",function(n,a,e,t,o){var s,i;return s=this,i=null,this.user={},this.getUser=function(){return null!=i?i:i=o.one("current_user").get().then(function(n){return angular.copy(n.data,s.user),n.data})},this.skipIfNotAdmin=function(){var n;return n=e.defer(),s.getUser().then(function(){return null!=s.user.admin_role&&"admin"===s.user.admin_role?n.resolve():(t(function(){return a.go("dashboard.home")}),n.reject())}),n},this.logout=function(){return s.getUser().then(function(a){return null!=a.organizations&&a.organizations.length>0?n.location.assign("/dashboard/"):n.location.assign("/dashboard/#!/logout")})},this.refreshUser=function(){return i=null,s.getUser().then(function(){return s.skipIfNotAdmin()})},this}])}.call(this),function(){this.App.service("MnoeInvoices",["MnoeAdminApiSvc",function(n){return this,this.currentBillingAmount=function(){return n.all("invoices").customGET("current_billing_amount")},this.lastInvoicingAmount=function(){return n.all("invoices").customGET("last_invoicing_amount")},this.outstandingAmount=function(){return n.all("invoices").customGET("outstanding_amount")},this.lastPortfolioAmount=function(){return n.all("invoices").customGET("last_portfolio_amount")},this.lastCommissionAmount=function(){return n.all("invoices").customGET("last_commission_amount")},this}])}.call(this),function(){this.App.service("MnoeOrganizations",["MnoeAdminApiSvc",function(n){var a,e;return this,this.list=function(e,t,o){var s;return s=n.all("organizations").getList({order_by:o,limit:e,offset:t}).then(function(n){return a(s),n})},e=[],this.registerListChangeCb=function(n){return e.push(n)},a=function(n){return _.forEach(e,function(a){return a(n)})},this.search=function(a){return n.all("organizations").getList({terms:a})},this.inArrears=function(){return n.all("organizations").all("in_arrears").getList()},this.get=function(a){return n.one("organizations",a).get()},this.count=function(){return n.all("organizations").customGET("count")},this.create=function(a){return n.all("/organizations").post(a)},this.update=function(a){return n.one("/organizations",a.id).patch(a)},this}])}.call(this),function(){this.App.service("MnoeReviews",["MnoeAdminApiSvc","$log","toastr",function(n,a,e){return this,this.list=function(){return n.all("app_reviews").getList().then(function(n){return n},function(n){return a.error("Error while fetching reviews",n),e.error("mnoe_admin_panel.dashboard.reviews_list.toastr_error")})},this.updateRating=function(t){return n.one("app_reviews",t.id).patch({status:t.status}).then(function(n){return n},function(n){return a.error("Error while updating review",n),e.error("mnoe_admin_panel.dashboard.feedback.toastr_error")})},this.updateDescription=function(t){return n.one("app_reviews",t.id).patch({description:t.description}).then(function(n){return n},function(n){return a.error("Error while updating review",n),e.error("mnoe_admin_panel.dashboard.feedback.toastr_error")})},this.replyQuestion=function(t,o){return n.all("/app_answers").post({question_id:t,app_answer:{description:o}}).then(function(n){return n},function(n){return a.error("Error while updating review",n),e.error("mnoe_admin_panel.dashboard.questions_reply_modal.toastr_error")})},this.replyFeedback=function(t,o){return n.all("/app_comments").post({feedback_id:t,app_comment:{description:o}}).then(function(n){return n},function(n){return a.error("Error while updating review",n),e.error("mnoe_admin_panel.dashboard.comment_edit.toastr_error")})},this}])}.call(this),function(){this.App.service("MnoeTenantInvoices",["MnoeAdminApiSvc",function(n){return this,this.list=function(){return n.all("tenant_invoices").getList()},this}])}.call(this),function(){this.App.service("MnoeUsers",["$q","$log","MnoeAdminApiSvc","MnoeObservables","OBS_KEYS",function(n,a,e,t,o){var s;return this,this.list=function(n,a,s){return e.all("users").getList({order_by:s,limit:n,offset:a}).then(function(n){return t.notifyObservers(o.userChanged,n),n})},this.staffs=function(n,a,e,t){return null==t&&(t={}),t["where[admin_role.in][]"]||(t["where[admin_role.not]"]=""),s(n,a,e,t)},this.search=function(n){return e.all("users").getList({terms:n})},this.get=function(n){return e.one("users",n).get()},this.count=function(){return e.all("users").customGET("count")},this.addUser=function(n,a){return e.one("organizations",n.id).all("/users").post({user:a})},this.addStaff=function(n){var a;return a=e.all("users").post({user:n}).then(function(n){return t.notifyObservers(o.staffAdded,a),n})},this.updateStaff=function(n){var a;return a=e.one("users",n.id).patch({user:n}).then(function(n){return t.notifyObservers(o.staffChanged,a),n})},this.removeStaff=function(n){var s;return s=e.one("users",n).patch({admin_role:null}).then(function(n){return t.notifyObservers(o.staffChanged,s)},function(n){return a.error("Error while deleting user",n),toastr.error("mnoe_admin_panel.dashboard.staff.modal.remove_staff.toastr_error")})},this.inviteUser=function(n,a){return e.one("organizations",n.id).one("users",a.id).doPOST({},"/invites")},this.sendSignupEmail=function(n){return e.all("/users").doPOST({user:{email:n}},"signup_email")},s=function(n,a,t,o){return null==o&&(o={}),o.order_by=t,o.limit=n,o.offset=a,e.all("users").getList(o)},this}])}.call(this),function(){this.App.controller("ConnectMyobModalCtrl",["$window","$httpParamSerializer","$uibModalInstance","MnoAppsInstances","app",function(n,a,e,t,o){"ngInject";var s;s=this,s.app=o,s.form={perform:!0,version:"essentials"},s.versions=[{label:"mnoe_admin_panel.dashboard.customers.connect_app.myob.version_type.right_live",value:"account_right"},{label:"mnoe_admin_panel.dashboard.customers.connect_app.myob.version_type.essentials",value:"essentials"}],s.connect=function(e){return n.location.href=t.oAuthConnectPath(o,a(e))},s.close=function(){return e.close()}}])}.call(this),function(){this.App.controller("ConnectXeroModalCtrl",["$window","$httpParamSerializer","$uibModalInstance","MnoAppsInstances","app",function(n,a,e,t,o){"ngInject";var s;s=this,s.app=o,s.form={perform:!0,xero_country:"AU"},s.countries=[{label:"mnoe_admin_panel.constants.countries.australia",value:"AU"},{label:"mnoe_admin_panel.constants.countries.usa",value:"US"}],s.connect=function(e){return s.payroll&&(e["extra_params[]"]="payroll"),n.location.href=t.oAuthConnectPath(o,a(e))},s.close=function(){return e.close()}}])}.call(this),function(){this.App.controller("ConnectAppController",["$stateParams","$window","$uibModal","MnoeOrganizations","MnoAppsInstances",function(n,a,e,t,o){"ngInject";var s;s=this,s.mnoAppInstances=o,s.orgId=n.orgId,s.isLoading=!0,t.get(n.orgId).then(function(n){return s.organization=n.data}).finally(function(){return s.isLoading=!1}),s.connectAppInstance=function(n){var t;switch(n.nid){case"xero":t={template:"app/views/customers/app-connect-modal/app-connect-modal-xero.html",controller:"ConnectXeroModalCtrl"};break;case"myob":t={template:"app/views/customers/app-connect-modal/app-connect-modal-myob.html",controller:"ConnectMyobModalCtrl"};break;default:return void(a.location.href=o.oAuthConnectPath(n))}return e.open({templateUrl:t.template,controller:t.controller,controllerAs:"vm",resolve:{app:function(){return n}}})}}])}.call(this),function(){this.App.controller("CreateStep1Controller",["$scope","$document","$state","toastr","MnoeAdminConfig","MnoeOrganizations","MnoeMarketplace","MnoErrorsHandler",function(n,a,e,t,o,s,i,r){"ngInject";var l;l=this,l.organization={},l.appSearch="",l.toggleApp=function(n){return n.checked=!n.checked},l.submitOrganisation=function(){var n;return l.form.$invalid&&!r.onlyServerError(l.form)?(n=angular.element(document.getElementById("org-form")),void a.scrollToElementAnimated(n)):(l.isLoading=!0,r.resetErrors(l.form),o.isAppManagementEnabled()&&(l.organization.app_nids=_.map(_.filter(l.marketplace.apps,{checked:!0}),"nid")),s.create(l.organization).then(function(n){return t.success("mnoe_admin_panel.dashboard.customers.create_customer.toastr_success",{extraData:{organization_name:l.organization.name}}),n=n.data.plain(),_.isEmpty(n.organization.active_apps)?e.go("dashboard.customers.organization",{orgId:n.organization.id}):e.go("dashboard.customers.connect-app",{orgId:n.organization.id})},function(n){return a.scrollTopAnimated(0),t.error("mnoe_admin_panel.dashboard.customers.create_customer.toastr_error",{extraData:{organization_name:l.organization.name}}),r.processServerError(n,l.form)}).finally(function(){return l.isLoading=!1}))},o.isAppManagementEnabled()&&i.getApps().then(function(n){return l.marketplace=angular.copy(n.data)})}])}.call(this),function(){this.App.controller("InviteUserController",["$filter","$stateParams","$uibModalInstance","toastr","MnoeUsers","MnoErrorsHandler","USER_ROLES",function(n,a,e,t,o,s,i){"ngInject";var r;r=this,r.USER_ROLES=i,r.onSubmit=function(){return r.isLoading=!0,o.sendSignupEmail(r.user.email).then(function(n){return t.success("mnoe_admin_panel.dashboard.customers.invite_user_modal.toastr_success",{extraData:{email:r.user.email}}),e.close(r.user.email)},function(n){return t.error("mnoe_admin_panel.dashboard.customers.invite_user_modal.toastr_error",{extraData:{email:r.user.email}}),s.processServerError(n)}).finally(function(){return r.isLoading=!1})},r.onCancel=function(){return e.dismiss("cancel")}}])}.call(this),function(){this.App.controller("AddAppModalCtrl",["$scope","$uibModalInstance","$window","MnoeMarketplace","MnoeOrganizations","organization","toastr",function(n,a,e,t,o,s,i){"ngInject";var r;r=this,r.modal_height=e.innerHeight-200+"px",r.selectedApp={},r.organization=angular.copy(s),r.loading={modal:!0,apps:!1},r.displayError=!1,t.getApps().then(function(n){var a;return r.marketplace=angular.copy(n.data.plain()),a=_.map(s.active_apps,"nid"),r.marketplace.filtered_apps=_.filter(r.marketplace.apps,function(n){if(!_.includes(a,n.nid))return n})}).finally(function(){return r.loading.modal=!1}),r.toggleApp=function(n){return n.checked=!n.checked},r.closeError=function(){return r.displayError=!1},r.addApps=function(){return r.loading.apps=!0,r.appNidsToAdd=_.map(_.filter(r.marketplace.apps,{checked:!0}),"nid"),r.organization.app_nids=_.union(r.appNidsToAdd,_.map(s.active_apps,"nid")),0===r.appNidsToAdd.length?void r.closeModal():o.update(r.organization).then(function(n){var a,e,t;return e=n.data.plain().organization.active_apps.length,t=r.organization.app_nids.length,r.organization=n.data.plain().organization,e===t?r.closeModal():(r.displayError=!0,a="undefined"!=typeof active_apps&&null!==active_apps?_.map(active_apps,"nid"):[],_.map(_.intersection(r.appNidsToAdd,a),function(n){return _.remove(r.marketplace.filtered_apps,{nid:n})}),r.arrayOfApps=_.map(_.difference(r.appNidsToAdd,a),function(n){return _.find(r.marketplace.filtered_apps,{nid:n}).name}),r.ListOfApps=r.arrayOfApps.join(", "))},function(n){return i.error("mnoe_admin_panel.dashboard.organization.add_app.toastr_error",{preventDuplicates:!1})}).finally(function(){return r.loading.apps=!1})},r.closeModal=function(){return a.close(r.organization)}}])}.call(this),function(){this.App.controller("CreateUserController",["$filter","$stateParams","$uibModalInstance","toastr","MnoeUsers","MnoErrorsHandler","USER_ROLES","organization",function(n,a,e,t,o,s,i,r){"ngInject";var l;l=this,l.USER_ROLES=i,l.onSubmit=function(){return l.isLoading=!0,o.addUser(r,l.user).then(function(n){return t.success("mnoe_admin_panel.dashboard.organization.create_user.toastr_success",{extraData:{username:l.user.name+" "+l.user.surname}}),e.close(n.data.user)},function(n){return t.error("mnoe_admin_panel.dashboard.organization.create_user.toastr_error",{extraData:{username:l.user.name+" "+l.user.surname}}),s.processServerError(n)}).finally(function(){return l.isLoading=!1})},l.onCancel=function(){return e.dismiss("cancel")}}])}.call(this),function(){this.App.controller("RemoveAppModalCtrl",["$scope","$uibModalInstance","MnoeAppInstances","app",function(n,a,e,t){"ngInject";var o;o=this,o.app=t,o.modal={loading:!1},o.deleteApp=function(){return o.modal.loading=!0,e.terminate(o.app.id).then(function(n){return o.errors=null,a.close(!0)}).finally(function(){return o.modal.loading=!1})},o.closeModal=function(){return a.close(!1)}}])}.call(this),function(){this.App.controller("CreateStaffController",["$filter","$stateParams","$log","$uibModalInstance","toastr","MnoeUsers","MnoErrorsHandler","ADMIN_ROLES",function(n,a,e,t,o,s,i,r){"ngInject";var l;l=this,l.admin_roles=r,l.onSubmit=function(){return l.isLoading=!0,s.addStaff(l.user).then(function(n){return o.success("mnoe_admin_panel.dashboard.staff.add_staff.modal.toastr_success",{extraData:{username:l.user.name+" "+l.user.surname}}),t.close(n.data)},function(n){return o.error("mnoe_admin_panel.dashboard.staff.add_staff.modal.toastr_error",{extraData:{user_name:l.user.name+" "+l.user.surname}}),e.error("An error occurred:",n)}).finally(function(){return l.isLoading=!1})},l.onCancel=function(){return t.dismiss("cancel")}}])}.call(this),angular.module("frontendAdmin").run(["$templateCache",function(n){n.put("app/views/dashboard.layout.html",'<mno-admin hide-footer="true" name="{{\'mnoe_admin_panel.dashboard.layout.sidebar.title\' | translate}}">\n  <mno-admin-header>\n    <div class="header">\n      <div class="header-container">\n        <div class="meta">\n          <img class="logo" src="images/main-logo.png">\n          <div class="title-wrapper">\n            <div class="page">\n              {{\'mnoe_admin_panel.dashboard.layout.title\' | translate}}\n            </div>\n            <div class="breadcrumb-links">\n              <div ncy-breadcrumb></div>\n            </div>\n          </div>\n        </div>\n\n        <div class="user">\n          <div class="item" uib-dropdown>\n            <a href="#" uib-dropdown-toggle>\n              <span class="name">{{ main.user.name }} {{ main.user.surname }}</span>\n              <img src="images/avatar.jpg">\n            </a>\n            <ul class="dropdown-menu dropdown-menu-right">\n              <li class="link">\n                <a ng-click="main.exit()" href="">\n                  {{\'mnoe_admin_panel.dashboard.layout.exit\' | translate}}\n                </a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  </mno-admin-header>\n\n  <mno-admin-nav>\n    <li class="sidebar-title"><span>{{\'mnoe_admin_panel.dashboard.layout.sidebar.navigation\' | translate}}</span></li>\n    <li class="sidebar-list" ui-sref-active="active">\n      <a ui-sref="dashboard.home">{{\'mnoe_admin_panel.dashboard.layout.sidebar.home\' | translate}}<span class="menu-icon fa fa-tachometer"></span></a>\n    </li>\n    <li class="sidebar-list" ng-if="main.isFinanceEnabled" ui-sref-active="active">\n      <a ui-sref="dashboard.finance">{{\'mnoe_admin_panel.dashboard.layout.sidebar.finance\' | translate}}<span class="menu-icon fa fa-money"></span></a>\n    </li>\n    <li class="sidebar-list" ui-sref-active="active">\n      <a ui-sref="dashboard.customers">{{\'mnoe_admin_panel.dashboard.layout.sidebar.customers\' | translate}}<span class="menu-icon fa fa-users"></span></a>\n    </li>\n    <li class="sidebar-list" ng-show="main.staffPageAuthorized.indexOf(main.user.admin_role)!=-1" ng-if="::main.adminConfig.isStaffEnabled()" ui-sref-active="active">\n      <a ui-sref="dashboard.staff">{{\'mnoe_admin_panel.dashboard.layout.sidebar.staff\' | translate}}<span class="menu-icon fa fa-wrench"></span></a>\n    </li>\n    <li class="sidebar-list" ng-show="main.staffPageAuthorized.indexOf(main.user.admin_role)!=-1" ng-if="main.isReviewingEnabled" ui-sref-active="active">\n      <a ui-sref="dashboard.reviews">{{\'mnoe_admin_panel.dashboard.layout.sidebar.comments\' | translate}}<span class="menu-icon fa fa-comment"></span></a>\n    </li>\n    <li class="sidebar-list" ng-if="::main.adminConfig.isAuditLogEnabled()" ui-sref-active="active">\n      <a ui-sref="dashboard.audit-log">{{\'mnoe_admin_panel.dashboard.layout.sidebar.audit_log\' | translate}}<span class="menu-icon fa fa-book"></span></a>\n    </li>\n  </mno-admin-nav>\n\n  <mno-admin-content>\n      \x3c!-- Main Content --\x3e\n      <div ui-view></div>\n  </mno-admin-content>\n</mno-admin>\n'),n.put("app/components/mno-confirm/mno-confirm.html",'<div class="modal-header">\n  <button type="button" class="close" aria-label="{{\'mnoe_admin_panel.dashboard.mno_confirm.close\' | translate}}" ng-click="modalOptions.close()"><span aria-hidden="true">&times;</span></button>\n  <h4 class="modal-title">{{modalOptions.headerText | translate:modalOptions.headerTextExtraData}}</h4>\n</div>\n<div class="modal-body">\n  <p>{{modalOptions.bodyText | translate:modalOptions.bodyTextExtraData}}</p>\n</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-default" ng-click="modalOptions.close()">{{modalOptions.closeButtonText | translate:modalOptions.closeButtonTextExtraData}}</button>\n  <button type="button" class="btn btn-primary" ng-click="modalOptions.ok();">{{modalOptions.actionButtonText | translate:modalOptions.actionButtonTextExtraData}}</button>\n</div>\n'),n.put("app/components/mno-pagination/mno-pagination.html",'<div class="nb-items-col">\n  <label translate>mnoe_admin_panel.dashboard.mno_pagination.number_of_items</label>\n  <select class="items-per-page-select form-control" ng-model="nbItems" ng-change="onPageChange()" ng-options="i for i in nbItemsValues" ng-disabled="isLoading">\n  </select>\n</div>\n\n<ul uib-pagination ng-model="page" ng-show="totalItems > nbItems" total-items="totalItems" items-per-page="nbItems" ng-change="onPageChange()" max-size="pagination.maxPages" rotate="false" ng-disabled="isLoading">\n</ul>\n'),n.put("app/components/mnoe-audit-events-list/mnoe-audit-events-list.html",'<mno-widget icon="fa-file-text-o" heading="{{$ctrl.events.widgetTitle}}" is-loading="events.loading">\n  <mno-widget-header>\n    &nbsp;{{ \'mnoe_admin_panel.dashboard.audit_log.widget.list.title\' | translate}}\n  </mno-widget-header>\n  <mno-widget-body class="no-padding">\n    <div>\n      \x3c!--<table class="class" st-pipe="$ctrl.callServer" st-table="$ctrl.displayed">--\x3e\n      <table st-pipe="$ctrl.callServer" st-table="$ctrl.events.list" class="table table-striped">\n        <thead>\n          <tr>\n            <th st-sort="created_at" class="col-lg-2" translate>mnoe_admin_panel.dashboard.audit_log.widget.list.table.date</th>\n            <th class="col-lg-2" translate>mnoe_admin_panel.dashboard.audit_log.widget.list.table.user</th>\n            <th class="col-lg-2" translate>mnoe_admin_panel.dashboard.audit_log.widget.list.table.organization</th>\n            <th st-sort="key" class="col-lg-2" translate>mnoe_admin_panel.dashboard.audit_log.widget.list.table.action</th>\n            <th st-sort="description" class="col-lg-2" translate>mnoe_admin_panel.dashboard.audit_log.widget.list.table.description</th>\n          </tr>\n        </thead>\n        <tbody ng-show="$ctrl.events.loading">\n          <tr>\n            <td colspan="6" class="text-center" translate>mnoe_admin_panel.dashboard.audit_log.widget.list.loading_events</td>\n          </tr>\n        </tbody>\n        <tbody ng-show="!$ctrl.events.loading">\n          <tr ng-repeat="event in $ctrl.events.list">\n            <td title="{{ event.created_at | amDateFormat: \'DD/MM/YYYY, h:mm:ss a\' }}">\n              {{event.created_at | amCalendar }}\n            </td>\n            <td title="{{event.user.email}}">\n              {{event.user.name}} {{event.user.surname}}\n            </td>\n            <td>{{event.organization.name || "-" }}</td>\n            <td>{{event.description}}</td>\n            <td>{{event.details || \'-\'}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </mno-widget-body>\n  <mno-widget-footer ng-show="$ctrl.events.list">\n    <mno-pagination page="$ctrl.events.page" nb-items="$ctrl.events.nbItems" total-items="$ctrl.events.totalItems" on-change-cb="$ctrl.events.pageChangedCb(nbItems, page)" is-loading="$ctrl.events.loading">\n    </mno-pagination>\n  </mno-widget-footer>\n</mno-widget>\n'),n.put("app/components/mnoe-organizations-list/mnoe-organizations-list.html",'<mno-widget icon="fa-sitemap" heading="{{organizations.widgetTitle | translate}}" is-loading="organizations.loading">\n  <mno-widget-header>\n    &nbsp;<a href="" ng-click="switchState()" ng-show="organizations.list && organizations.switchLinkTitle" ng-class="{\'disabled\': organizations.loading}" translate>{{organizations.switchLinkTitle}}</a>\n    <input type="text" ng-model="organizations.search" ng-change="searchChange()" ng-model-options="{ debounce: 1000 }" placeholder="{{\'mnoe_admin_panel.dashboard.organization.widget.list.search_users.placeholder.search_all\' | translate}}" class="form-control input-sm search-bar">\n  </mno-widget-header>\n  <mno-widget-body class="large no-padding">\n    <table class="table table-layout-fixed">\n      <thead>\n        <tr>\n          <th translate>mnoe_admin_panel.dashboard.organization.widget.list.table.name</th>\n          <th style="width: 100px" translate>mnoe_admin_panel.dashboard.organization.widget.list.table.creation</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="organization in organizations.list">\n          <td><a ui-sref="dashboard.customers.organization({orgId: organization.id})">{{::organization.name}}</a></td>\n          <td>{{::organization.created_at | date: \'dd/MM/yyyy\'}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </mno-widget-body>\n  <mno-widget-footer ng-show="organizations.list && state == \'all\' && !searchMode">\n    <mno-pagination page="organizations.page" nb-items="organizations.nbItems" total-items="organizations.totalItems" on-change-cb="organizations.pageChangedCb(nbItems, page)" is-loading="organizations.loading">\n    </mno-pagination>\n  </mno-widget-footer>\n</mno-widget>\n'),n.put("app/components/mnoe-organizations-local-list/mnoe-organizations-local-list.html",'<mno-widget icon="fa-sitemap" heading="{{organizations.widgetTitle | translate:{length: list.length} }}" is-loading="!list">\n  <mno-widget-header>\n    &nbsp;<a href="" ng-click="switchState()" ng-show="list && organizations.switchLinkTitle" translate>{{organizations.switchLinkTitle}}</a>\n    <input type="text" ng-model="organizations.search" ng-change="searchChange()" placeholder="{{\'mnoe_admin_panel.dashboard.organization.widget.local_list.search_organizations.placeholder.search_all\' | translate}}" class="form-control input-sm search-bar">\n  </mno-widget-header>\n  <mno-widget-body class="large no-padding">\n    <table class="table table-layout-fixed">\n      <thead>\n        <tr>\n          <th translate>mnoe_admin_panel.dashboard.organization.widget.local_list.search_organizations.table.name</th>\n          <th style="width: 100px" translate>mnoe_admin_panel.dashboard.organization.widget.local_list.search_organizations.table.creation</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="organization in organizations.displayList">\n          <td>\n            <a ui-sref="dashboard.customers.organization({orgId: organization.id})">\n              {{::organization.name}}\n            </a>\n          </td>\n          <td>{{organization.created_at | date: \'dd/MM/yyyy\'}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </mno-widget-body>\n</mno-widget>\n'),n.put("app/components/mnoe-reviews-list/comment-edit-modal.html",'<div class="modal-header">\n  <div class="close" type="button" ng-click="closeModal()"></div>\n  <h3 translate>mnoe_admin_panel.dashboard.comment_edit.title</h3>\n</div>\n\n<div class="modal-body">\n  <div class="main-area comment-input">\n    <textarea ng-model="review.description" rows="8" cols="40"></textarea>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row">\n    <div class="col-md-12">\n      <button class="btn btn-default" ng-click="closeModal()" translate>\n        mnoe_admin_panel.dashboard.comment_edit.cancel\n      </button>\n      <button class="btn btn-default" ng-click="submitIteraction()" translate>\n        mnoe_admin_panel.dashboard.comment_edit.submit\n      </button>\n    </div>\n  </div>\n</div>\n'),n.put("app/components/mnoe-reviews-list/comment-modal.html",'<div class="modal-header">\n  <div class="close" type="button" ng-click="closeModal()"></div>\n  <h3 translate>mnoe_admin_panel.dashboard.comment_modal.title</h3>\n</div>\n\n<div class="modal-body">\n  <div class="main-area comment-input">\n    <textarea ng-model="commentText" rows="8" cols="40"></textarea>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row">\n    <div class="col-md-12">\n      <button class="btn btn-default" ng-click="closeModal()" translate>\n        mnoe_admin_panel.dashboard.comment_modal.cancel\n      </button>\n      <button class="btn btn-default" ng-click="submitIteraction()" translate>\n        mnoe_admin_panel.dashboard.comment_modal.submit\n      </button>\n    </div>\n  </div>\n</div>\n'),n.put("app/components/mnoe-reviews-list/feedback-reply-modal.html",'<div class="modal-header">\n  <div class="close" type="button" ng-click="closeModal()"></div>\n  <h3 translate>mnoe_admin_panel.dashboard.feedback.title</h3>\n</div>\n\n<div class="modal-body">\n  <div class="main-area comment-input">\n    <textarea ng-model="replyText" rows="8" cols="40"></textarea>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row">\n    <div class="col-md-12">\n      <button class="btn btn-default" ng-click="closeModal()" translate>\n        mnoe_admin_panel.dashboard.feedback.cancel\n      </button>\n      <button class="btn btn-default" ng-click="submitIteraction()" translate>\n        mnoe_admin_panel.dashboard.feedback.submit\n      </button>\n    </div>\n  </div>\n</div>\n'),n.put("app/components/mnoe-reviews-list/mnoe-reviews-list.html",'<mno-widget icon="fa-comment" heading="{{ \'mnoe_admin_panel.dashboard.reviews_list.title\' | translate}}">\n  <mno-widget-header></mno-widget-header>\n  <mno-widget-body class="large no-padding widget-comments">\n    <div>\n      <table class="table table-striped">\n        <thead>\n          <tr>\n            <th translate>mnoe_admin_panel.dashboard.reviews_list.author</th>\n            <th translate>mnoe_admin_panel.dashboard.reviews_list.company</th>\n            <th translate>mnoe_admin_panel.dashboard.reviews_list.app</th>\n            <th translate>mnoe_admin_panel.dashboard.reviews_list.type</th>\n            <th translate>mnoe_admin_panel.dashboard.reviews_list.message</th>\n            <th translate>mnoe_admin_panel.dashboard.reviews_list.rating</th>\n            <th translate>mnoe_admin_panel.dashboard.reviews_list.date</th>\n            <th translate>mnoe_admin_panel.dashboard.reviews_list.status</th>\n            <th translate>mnoe_admin_panel.dashboard.reviews_list.edit</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="review in listOfReviews">\n            <td>\n              {{review.user_name}}\n            </td>\n            <td>\n              {{review.organization_name}}\n            </td>\n            <td>\n              {{review.app_name}}\n            </td>\n            <td>\n              {{review.type}}\n            </td>\n            <td>\n              <p>{{review.description}}</p>\n              <div class="text-right">\n                <button type="button" name="button" ng-click="openQuestionReplyModal(review)" ng-show="review.type == \'Question\'" translate>mnoe_admin_panel.dashboard.reviews_list.button.reply</button>\n                <button type="button" name="button" ng-click="openFeedbackReplyModal(review)" ng-show="review.type == \'Feedback\'" translate>mnoe_admin_panel.dashboard.reviews_list.button.comment</button>\n                <button type="button" name="button" ng-click="openEditModal(review)" translate>mnoe_admin_panel.dashboard.reviews_list.button.edit</button>\n              </div>\n            </td>\n            <td>\n              {{review.rating}}\n            </td>\n            <td>\n              {{review.created_at | date: \'dd/MM/yyyy\' }}\n            </td>\n            <td><span ng-show="!editmode[review.id]">{{review.status}}</span>\n              <select ng-model="review.status" ng-show="editmode[review.id]">\n                <option ng-repeat="status in statuses" value="{{status.value}}" translate>{{status.label}}</option>\n              </select>\n            </td>\n            <td>\n              <a href="" ng-hide="editmode[review.id]" ng-click="editmode[review.id] = true"><i class="fa fa-pencil"></i></a>\n              <a href="" ng-show="editmode[review.id]" ng-click="update(review)"><i class="fa fa-check"></i></a>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </mno-widget-body>\n</mno-widget>\n'),n.put("app/components/mnoe-reviews-list/question-reply-modal.html",'<div class="modal-header">\n  <div class="close" type="button" ng-click="closeModal()"></div>\n  <h3 translate>mnoe_admin_panel.dashboard.questions_reply_modal.title</h3>\n</div>\n\n<div class="modal-body">\n  <div class="main-area comment-input">\n    <textarea ng-model="replyText" rows="8" cols="40"></textarea>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row">\n    <div class="col-md-12">\n      <button class="btn btn-default" ng-click="closeModal()" translate>\n        mnoe_admin_panel.dashboard.questions_reply_modal.cancel\n      </button>\n      <button class="btn btn-default" ng-click="submitIteraction()" translate>\n        mnoe_admin_panel.dashboard.questions_reply_modal.submit\n      </button>\n    </div>\n  </div>\n</div>\n'),
n.put("app/components/mnoe-staffs-list/mnoe-staffs-list.html",'<mno-widget icon="fa-wrench" heading="{{$ctrl.staff.widgetTitle}}" is-loading="staff.loading">\n  <mno-widget-header>\n    &nbsp;{{ \'mnoe_admin_panel.dashboard.staff.widget.list.title\' | translate}}\n  </mno-widget-header>\n  <mno-widget-body class="large no-padding">\n    <div>\n      <table class="table" st-pipe="$ctrl.callServer" st-table="$ctrl.displayed">\n      <table st-pipe="$ctrl.callServer" st-table="$ctrl.listOfStaff" class="table table-striped">\n        <thead>\n          <tr>\n            <th st-sort="name" class="col-lg-2" translate>mnoe_admin_panel.dashboard.staff.widget.list.table.first_name</th>\n            <th st-sort="surname" class="col-lg-3" translate>mnoe_admin_panel.dashboard.staff.widget.list.table.last_name</th>\n            <th st-sort="created_at" class="col-lg-3" translate>mnoe_admin_panel.dashboard.staff.widget.list.table.creation</th>\n            <th st-sort="admin_role" class="col-lg-3" translate>mnoe_admin_panel.dashboard.staff.widget.list.table.role</th>\n            <th></th>\n            <th></th>\n        \t</tr>\n        \t<tr>\n            <th>\n                <input st-search="name" placeholder="{{\'mnoe_admin_panel.dashboard.staff.widget.list.placeholder.search_name\' | translate}}" class="form-control input-sm search-bar" type="text">\n            </th>\n            <th>\n                <input st-search="surname" placeholder="{{\'mnoe_admin_panel.dashboard.staff.widget.list.placeholder.search_surname\' | translate}}" class="form-control input-sm search-bar" type="text">\n            </th>\n            <th></th>\n            <th>\n              <select st-search="admin_role" class="form-control input-sm">\n                <option value="" selected="selected" translate>mnoe_admin_panel.dashboard.staff.widget.list.table.admin_role.all</option>\n                <option value="{{role.value}}" ng-repeat="role in $ctrl.staff.roles">{{ role.label | translate }}</option>\n              </select>\n            </th>\n            <th></th>\n            <th></th>\n        \t</tr>\n      \t</thead>\n        <tbody ng-show="$ctrl.staff.loading">\n          <tr>\n            <td colspan="6" class="text-center" translate>mnoe_admin_panel.dashboard.staff.widget.list.loading_staff</td>\n          </tr>\n        </tbody>\n      \t<tbody ng-show="!$ctrl.staff.loading">\n          <tr ng-repeat="staffElem in $ctrl.listOfStaff">\n            <td>{{staffElem.name}}</td>\n            <td>{{staffElem.surname}}</td>\n            <td>{{staffElem.created_at | date: \'dd/MM/yyyy\'}}</td>\n            <td><span ng-show="!$ctrl.staff.editmode[staffElem.id]" translate>{{$ctrl.getAdminRoleLabel(staffElem.admin_role)}}</span>\n              <select ng-model="staffElem.admin_role" ng-show="$ctrl.staff.editmode[staffElem.id]" class="user-role-select form-control input-sm">\n                <option ng-repeat="role in $ctrl.staff.roles" value="{{role.value}}">{{role.label | translate}}</option>\n              </select>\n            </td>\n            <td>\n              <div ng-hide="$ctrl.staff.oneAdminLeft && staffElem.admin_role == \'admin\'">\n                <a href="" ng-hide="$ctrl.staff.editmode[staffElem.id]" ng-click="$ctrl.staff.editmode[staffElem.id] = true"><i class="fa fa-pencil"></i></a>\n              </div>\n            </td>\n            <td>\n              <div ng-hide="$ctrl.staff.oneAdminLeft && staffElem.admin_role == \'admin\'">\n                <a href="" ng-hide="$ctrl.staff.editmode[staffElem.id]" ng-click="$ctrl.staff.remove(staffElem)"><i class="fa fa-times"></i></a>\n              </div>\n              <a href="" ng-show="$ctrl.staff.editmode[staffElem.id]" ng-click="$ctrl.staff.update(staffElem)"><i class="fa fa-check"></i></a>\n            </td>\n          </tr>\n      \t</tbody>\n      </table>\n    </table></div>\n  </mno-widget-body>\n  <mno-widget-footer ng-show="$ctrl.listOfStaff && $ctrl.state == \'all\' && !searchMode">\n    <mno-pagination page="$ctrl.staff.page" nb-items="$ctrl.staff.nbItems" total-items="$ctrl.staff.totalItems" on-change-cb="$ctrl.staff.pageChangedCb(nbItems, page)" is-loading="$ctrl.staff.loading">\n    </mno-pagination>\n  </mno-widget-footer>\n</mno-widget>\n'),n.put("app/components/mnoe-users-list/mno-users-list.html",'<mno-widget icon="fa-users" heading="{{users.widgetTitle | translate}}" is-loading="users.loading">\n  <mno-widget-header>\n    &nbsp;<a href="" ng-click="switchState()" ng-show="users.list && users.switchLinkTitle" ng-class="{\'disabled\': users.loading}" translate>{{users.switchLinkTitle}}</a>\n    <input type="text" ng-model="users.search" ng-change="searchChange()" ng-model-options="{ debounce: 1000 }" placeholder="{{\'mnoe_admin_panel.dashboard.users.widget.list.search_users.placeholder.search_all\' | translate}}" class="form-control input-sm search-bar">\n  </mno-widget-header>\n  <mno-widget-body class="large no-padding">\n    <table class="table table-layout-fixed">\n      <thead>\n        <tr>\n          <th translate>mnoe_admin_panel.dashboard.users.widget.list.table.username</th>\n          <th width="110" translate>mnoe_admin_panel.dashboard.users.widget.list.table.last_login</th>\n          <th width="100" translate>mnoe_admin_panel.dashboard.users.widget.list.table.creation</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="user in users.list">\n          <td>\n            <a ui-sref="dashboard.customers.user({userId: user.id})">\n              <div ng-show="user.name && user.surname">{{::user.name}} {{::user.surname}}</div>\n              <div ng-show="!user.name && !user.surname">nc</div>\n              <small>{{::user.email}}</small>\n            </a>\n          </td>\n          <td>\n            <span data-toggle="tooltip" title="{{::user.last_sign_in_at | date: \'H:m - dd/MM/yyyy\'}}">\n              {{(user.last_sign_in_at | amTimeAgo) || (\'mnoe_admin_panel.dashboard.users.widget.list.never\' | translate)}}\n            </span>\n          </td>\n          <td>{{::user.created_at | date: \'dd/MM/yyyy\'}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </mno-widget-body>\n  <mno-widget-footer ng-show="users.list && state == \'all\' && !searchMode">\n    <mno-pagination page="users.page" nb-items="users.nbItems" total-items="users.totalItems" on-change-cb="users.pageChangedCb(nbItems, page)" is-loading="users.loading">\n    </mno-pagination>\n  </mno-widget-footer>\n</mno-widget>\n'),n.put("app/components/mnoe-users-local-list/mnoe-users-local-list.html",'<mno-widget icon="fa-users" heading="{{users.widgetTitle | translate:{length: list.length} }}" is-loading="!list">\n  <mno-widget-header>\n    &nbsp;<a href="" ng-click="switchState()" ng-show="list && users.switchLinkTitle" translate>{{users.switchLinkTitle}}</a>\n    <input type="text" ng-model="users.search" ng-change="searchChange()" placeholder="{{ \'mnoe_admin_panel.dashboard.users.widget.local_list.search_users.placeholder.search_all\' | translate}}" class="form-control input-sm search-bar">\n  </mno-widget-header>\n  <mno-widget-body class="medium no-padding">\n    <table class="table table-layout-fixed">\n      <thead>\n        <tr>\n          <th translate>mnoe_admin_panel.dashboard.users.widget.local_list.table.username</th>\n          <th style="width: 100px" translate>mnoe_admin_panel.dashboard.users.widget.local_list.table.creation</th>\n          <th style="width: 140px" translate>mnoe_admin_panel.dashboard.users.widget.local_list.table.status</th>\n          <th style="width: 100px" ng-if="isImpersonationEnabled"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="user in users.displayList">\n          <td>\n            <a ui-sref="dashboard.customers.user({userId: user.id})">\n              <div ng-show="user.name && user.surname">{{::user.name}} {{::user.surname}}</div>\n              <div ng-show="!user.name && !user.surname">nc</div>\n              <small>{{::user.email}}</small>\n            </a>\n          </td>\n          <td>{{user.created_at | date: \'dd/MM/yyyy\'}}</td>\n          <td>\n            <button ng-show="user.status === \'pending\'" ng-click="sendInvitation(user)" class="btn btn-xs btn-default" ng-disabled="user.isSendingInvite">\n              <span ng-show="user.isSendingInvite"><i class="fa fa-spinner fa-pulse fa-fw"></i></span>\n              {{\'mnoe_admin_panel.dashboard.users.widget.local_list.invite\' | translate}}\n            </button>\n            <button ng-show="user.status === \'invited\'" ng-click="sendInvitation(user)" class="btn btn-xs btn-default" ng-disabled="user.isSendingInvite">\n              <span ng-show="user.isSendingInvite"><i class="fa fa-spinner fa-pulse fa-fw"></i></span>\n              {{\'mnoe_admin_panel.dashboard.users.widget.local_list.resend_invite\' | translate}}\n            </button>\n            <span ng-show="user.status === \'active\'" translate>mnoe_admin_panel.dashboard.users.widget.local_list.active</span>\n          </td>\n          <td ng-if="isImpersonationEnabled"><a href="" ng-click="impersonateUser(user)" translate>mnoe_admin_panel.dashboard.users.widget.local_list.login_as</a></td>\n        </tr>\n      </tbody>\n    </table>\n  </mno-widget-body>\n</mno-widget>\n'),n.put("app/views/audit-log/audit-log.html",'<div id="audit-log" class="row">\n  <div class="col-lg-10 col-lg-offset-1 col-md-12">\n    <div class="btn-group pull-right top-buffer-1">\n      <a type="button" class="btn btn-primary" href="/mnoe/jpi/v1/admin/audit_events.csv">\n        <i class="fa fa-download"></i>\n        {{\'mnoe_admin_panel.dashboard.audit_log.main.export\' | translate}}\n      </a>\n    </div>\n  </div>\n  <div class="col-lg-10 col-lg-offset-1 col-md-12">\n    <mnoe-audit-events-list></mnoe-audit-events-list>\n  </div>\n</div>\n'),n.put("app/views/customers/customers.html",'<div id="customers">\n  <div class="row">\n    <div class="col-lg-3 col-md-6 col-xs-12">\n      <mno-kpi class="kpi-color-1" description="{{\'mnoe_admin_panel.dashboard.customers.main.kpi_users\' | translate}}" icon="fa-users" value="{{vm.users.totalCount}}" loading="!vm.users.totalCount"></mno-kpi>\n    </div>\n\n    <div class="col-lg-3 col-md-6 col-xs-12">\n      <mno-kpi class="kpi-color-2" description="{{\'mnoe_admin_panel.dashboard.customers.main.kpi_organizations\' | translate}}" icon="fa-sitemap" value="{{vm.organizations.totalCount}}" loading="!vm.organizations.totalCount"></mno-kpi>\n\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-xs-12" ng-if="::main.adminConfig.isOrganizationManagementEnabled()">\n      <div class="btn-group pull-right top-buffer-1" uib-dropdown keyboard-nav>\n        <button id="simple-btn-keyboard-nav" type="button" class="btn btn-primary" uib-dropdown-toggle>\n          {{\'mnoe_admin_panel.dashboard.customers.main.new_customer\' | translate}} &nbsp;<span class="caret"></span>\n        </button>\n        <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="simple-btn-keyboard-nav">\n          <li role="menuitem"><a href="" ng-click="vm.inviteUserModal()" translate>mnoe_admin_panel.dashboard.customers.main.invite_customer</a></li>\n          <li role="menuitem"><a ui-sref="dashboard.customers.create-step-1" translate>mnoe_admin_panel.dashboard.customers.main.create_customer</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="col-xs-12">\n      <mnoe-organizations-list view="all"></mnoe-organizations-list>\n    </div>\n    <div class="col-xs-12">\n      <mnoe-users-list view="all"></mnoe-users-list>\n    </div>\n  </div>\n</div>\n'),n.put("app/views/finance/finance.html",'<div id="finance" class="row">\n  <div class="col-lg-3 col-md-6 col-xs-12">\n    <mno-kpi class="kpi-color-1" description="{{\'mnoe_admin_panel.dashboard.finance.current_billing\' | translate}}" icon="fa-file-text-o" value="{{vm.invoices.currentBillingAmount.amount}}" unit="{{vm.invoices.currentBillingAmount.currency}}" loading="!vm.invoices.currentBillingAmount">\n    </mno-kpi>\n  </div>\n  <div class="col-lg-3 col-md-6 col-xs-12">\n    <mno-kpi class="kpi-color-2" description="{{\'mnoe_admin_panel.dashboard.finance.last_customer_invoicing\' | translate}}" icon="fa-file-text-o" value="{{vm.invoices.lastInvoicingAmount.amount}}" unit="{{vm.invoices.lastInvoicingAmount.currency}}" loading="!vm.invoices.lastInvoicingAmount">\n    </mno-kpi>\n  </div>\n  <div class="col-lg-3 col-md-6 col-xs-12">\n    <mno-kpi class="kpi-color-3" description="{{\'mnoe_admin_panel.dashboard.finance.last_revenue\' | translate}}" icon="fa-file-text-o" value="{{vm.invoices.lastPortfolioAmount.amount}}" unit="{{vm.invoices.lastPortfolioAmount.currency}}" loading="!vm.invoices.lastPortfolioAmount">\n    </mno-kpi>\n  </div>\n  <div class="col-lg-3 col-md-6 col-xs-12">\n    <mno-kpi class="kpi-color-4" description="{{\'mnoe_admin_panel.dashboard.finance.last_commission\' | translate}}" icon="fa-file-text-o" value="{{vm.invoices.lastCommissionAmount.amount}}" unit="{{vm.invoices.lastCommissionAmount.currency}}" loading="!vm.invoices.lastCommissionAmount">\n    </mno-kpi>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-6">\n    <mno-widget icon="fa-exclamation-circle" heading="{{\'mnoe_admin_panel.dashboard.finance.customer_accounts_in_arrears\' | translate}}">\n      <mno-widget-header></mno-widget-header>\n      <mno-widget-body class="large no-padding">\n        <div class="table-responsive">\n          <table class="table">\n            <thead>\n              <tr>\n                <th translate>mnoe_admin_panel.dashboard.finance.table.organization</th>\n                <th translate>mnoe_admin_panel.dashboard.finance.table.amount</th>\n                <th translate>mnoe_admin_panel.dashboard.finance.table.reason</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr ng-repeat="arrear in vm.organizations.inArrears">\n                <td>{{arrear.name}}</td>\n                <td ng-if="arrear.amount">{{arrear.amount.options.iso_code}} {{arrear.amount.value}}</td>\n                <td ng-if="!arrear.amount">-</td>\n                <td>{{arrear.category}}</td>\n              </tr>\n              \x3c!-- <tr ng-repeat="orgaInArrear in vm.invoices.organizationsInArrears">\n                <td><a ui-sref="dashboard.customers.organization({orgId: orgaInArrear.id})">{{orgaInArrear.name}}</a></td>\n                <td>AUD 56.00</td>\n              </tr> --\x3e\n            </tbody>\n          </table>\n        </div>\n      </mno-widget-body>\n    </mno-widget>\n  </div>\n  <div class="col-lg-6">\n    <mno-widget icon="fa-file-text-o" heading="{{\'mnoe_admin_panel.dashboard.finance.current_billing.your+partner_report\' | translate}}" is-loading="!vm.invoices.tenantInvoices">\n      <mno-widget-header></mno-widget-header>\n      <mno-widget-body class="large no-padding">\n        <div class="table-responsive">\n          <table class="table">\n            <thead>\n              <tr>\n                <th translate>mnoe_admin_panel.dashboard.finance.table.start</th>\n                <th translate>mnoe_admin_panel.dashboard.finance.table.end</th>\n                <th translate>mnoe_admin_panel.dashboard.finance.table.revenue</th>\n                <th translate>mnoe_admin_panel.dashboard.finance.table.commission</th>\n                <th class="text-center" translate>mnoe_admin_panel.dashboard.finance.table.paid</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr ng-repeat="invoice in vm.invoices.tenantInvoices">\n                <td>{{invoice.started_at | date: \'dd/MM/yyyy\'}}</td>\n                <td>{{invoice.ended_at | date: \'dd/MM/yyyy\'}}</td>\n                <td>{{invoice.total_portfolio_amount.options.iso_code}} {{invoice.total_portfolio_amount.value}}</td>\n                <td>{{invoice.total_commission_amount.options.iso_code}} {{invoice.total_commission_amount.value}}</td>\n                <td class="text-center">\n                  <span ng-if="invoice.paid_at" class="text-success" translate>mnoe_admin_panel.dashboard.finance.table.yes</span>\n                  <span ng-if="!invoice.paid_at" class="text-danger" translate>mnoe_admin_panel.dashboard.finance.table.no</span>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </mno-widget-body>\n    </mno-widget>\n  </div>\n</div>\n'),n.put("app/views/home/home.html",'<div id="home" class="row">\n  <div class="col-lg-3 col-md-6 col-xs-12">\n    <mno-kpi class="kpi-color-1" description="{{\'mnoe_admin_panel.dashboard.home.kpi.users\' | translate}}" icon="fa-users" value="{{vm.users.kpi.total_count}}" loading="!vm.users.kpi" mno-ui-sref="dashboard.customers" link-text="{{\'mnoe_admin_panel.dashboard.home.kpi.users.link_text\' | translate:{\'quantity\': vm.users.kpi.new_month_count} }}"></mno-kpi>\n  </div>\n\n  <div class="col-lg-3 col-md-6 col-xs-12">\n    <mno-kpi class="kpi-color-2" description="{{\'mnoe_admin_panel.dashboard.home.kpi.organizations\' | translate}}" icon="fa-sitemap" value="{{vm.organizations.kpi.total_count}}" loading="!vm.organizations.kpi" mno-ui-sref="dashboard.customers" link-text="{{\'mnoe_admin_panel.dashboard.home.kpi.organizations.link_text\' | translate:{\'quantity\': vm.organizations.kpi.with_cc_count} }}"></mno-kpi>\n  </div>\n\n  <div class="col-lg-3 col-md-6 col-xs-12" ng-if="::main.adminConfig.isFinanceEnabled()">\n    <mno-kpi class="kpi-color-3" description="{{\'mnoe_admin_panel.dashboard.home.kpi.last_customer_invoicing\' | translate}}" icon="fa-file-text-o" value="{{vm.invoices.lastInvoicingAmount.amount}}" unit="{{vm.invoices.lastInvoicingAmount.currency}}" loading="!vm.invoices.lastInvoicingAmount" mno-ui-sref="dashboard.finance" link-text="{{\'mnoe_admin_panel.dashboard.home.kpi.last_customer_invoicing.link_text\' | translate}}"></mno-kpi>\n  </div>\n\n  <div class="col-lg-3 col-md-6 col-xs-12" ng-if="::main.adminConfig.isFinanceEnabled()">\n    <mno-kpi class="kpi-color-4" description="{{\'mnoe_admin_panel.dashboard.home.kpi.to_be_paid\' | translate}}" icon="fa-money" value="{{vm.invoices.outstandingAmount.amount}}" unit="{{vm.invoices.outstandingAmount.currency}}" loading="!vm.invoices.outstandingAmount" mno-ui-sref="dashboard.finance" link-text="{{\'mnoe_admin_panel.dashboard.home.kpi.to_be_paid.link_text\' | translate}}"></mno-kpi>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-6">\n    <mnoe-users-list view="last"></mnoe-users-list>\n  </div>\n  <div class="col-md-6">\n    <mnoe-organizations-list view="last"></mnoe-organizations-list>\n  </div>\n</div>\n'),n.put("app/views/organization/organization.html",'<div id="organization">\n  <div class="row">\n    <div class="col-xs-12">\n      <h1 translate>mnoe_admin_panel.dashboard.organization.organization_info</h1>\n\n      <mno-widget is-loading="!vm.organization.invoices" icon="fa-sitemap" heading="{{vm.organization.name}}">\n        <mno-widget-header></mno-widget-header>\n        <mno-widget-body>\n          <div class="bs-row row">\n            <div class="col-xs-6">\n              <div class="label-cell" translate>mnoe_admin_panel.dashboard.organization.uid</div>\n            </div>\n            <div class="col-xs-6">\n              {{vm.organization.uid}}\n            </div>\n          </div>\n          <div class="bs-row row">\n            <div class="col-xs-6">\n              <div class="label-cell" translate>mnoe_admin_panel.dashboard.organization.credit_card</div>\n            </div>\n            <div class="col-xs-6">\n              <span ng-if="vm.organization.credit_card.presence" class="text-success" translate>mnoe_admin_panel.dashboard.organization.credit_card.presence.yes</span>\n              <span ng-if="!vm.organization.credit_card.presence" class="text-danger" translate="">mnoe_admin_panel.dashboard.organization.credit_card.presence.no</span>\n            </div>\n          </div>\n          <div class="bs-row row">\n            <div class="col-sm-6"><div class="label-cell">{{\'mnoe_admin_panel.dashboard.organization.active_apps\' | translate}}\n              <a ng-if="vm.organization.active_apps.length > 0 && vm.hasDisconnectedApps" ui-sref="dashboard.customers.connect-app({orgId: vm.organization.id})" translate>mnoe_admin_panel.dashboard.organization.connect_apps</a></div></div>\n            <div class="col-sm-6">\n              <div class="bs-row row apps-box">\n                <div class="app-wrapper col-xs-6 col-sm-4 col-md-3" ng-repeat="app in vm.organization.active_apps">\n                  <div class="small-app-card ellipsis">\n                    <i ng-if="::main.adminConfig.isAppManagementEnabled()" class="fa fa-trash app-remove" ng-click="vm.openRemoveAppModal(app, $index)" uib-tooltip="{{\'mnoe_admin_panel.dashboard.organization.remove_app\' | translate:{\'app_name\': app.app_name} }}" tooltip-append-to-body="true"></i>\n                    <i ng-show="vm.status[app.nid]" class="fa fa-check-circle app-state state-success" uib-tooltip="{{\'mnoe_admin_panel.dashboard.organization.app_connected\' | translate:{\'app_name\': app.app_name} }}" tooltip-append-to-body="true"></i>\n                    <i ng-show="!vm.status[app.nid]" class="fa fa-exclamation-circle app-state state-warning" uib-tooltip="{{\'mnoe_admin_panel.dashboard.organization.app_not_connected\' | translate:{\'app_name\': app.app_name} }}" tooltip-append-to-body="true"></i>\n                    <img ng-src="{{::app.app_logo}}" width="60">\n                    <span>{{::app.app_name}}</span>\n                  </div>\n                </div>\n                <div class="app-wrapper col-xs-6 col-sm-4 col-md-3" ng-if="::main.adminConfig.isAppManagementEnabled()">\n                  <div class="small-app-card ellipsis add-app" ng-click="vm.openAddAppModal()">\n                    <span>{{\'mnoe_admin_panel.dashboard.organization.add_an_app\' | translate}}<i class="fa fa-plus"></i></span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </mno-widget-body>\n      </mno-widget>\n    </div>\n  </div>\n  <div class="row" ng-if="::main.adminConfig.isUserManagementEnabled()">\n    <div class="col-xs-12 top-buffer-1">\n      <button role="button" ng-click="vm.users.createUserModal()" ng-disabled="!vm.organization" class="btn btn-primary" translate>\n        mnoe_admin_panel.dashboard.organization.add_a_user\n      </button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-6">\n      <mnoe-users-local-list list="vm.organization.members" organization="vm.organization" view="all"></mnoe-users-local-list>\n    </div>\n    <div class="col-md-6" ng-if="::main.adminConfig.isFinanceEnabled()">\n      <mno-widget icon="fa-file-text-o" heading="{{\'mnoe_admin_panel.dashboard.organization.invoices.title\' | translate}}" is-loading="!vm.organization.invoices">\n        <mno-widget-header></mno-widget-header>\n        <mno-widget-body class="medium no-padding">\n          <div class="table-responsive">\n            <table class="table">\n              <thead>\n                <tr>\n                  <th translate>mnoe_admin_panel.dashboard.organization.invoices.table.start</th>\n                  <th translate>mnoe_admin_panel.dashboard.organization.invoices.table.end</th>\n                  <th translate>mnoe_admin_panel.dashboard.organization.invoices.table.amount</th>\n                  <th class="text-center" translate>mnoe_admin_panel.dashboard.organization.invoices.table.paid</th>\n                  <th class="text-center"></th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr ng-repeat="invoice in vm.organization.invoices">\n                  <td>{{invoice.started_at | date: \'dd/MM/yyyy\'}}</td>\n                  <td>{{invoice.ended_at | date: \'dd/MM/yyyy\'}}</td>\n                  <td>{{invoice.amount.options.iso_code}} {{invoice.amount.value}}</td>\n                  <td class="text-center">\n                    <span ng-if="invoice.paid" class="text-success" translate>mnoe_admin_panel.dashboard.organization.invoices.table.yes</span>\n                    <span ng-if="!invoice.paid" class="text-danger" translate>mnoe_admin_panel.dashboard.organization.invoices.table.no</span>\n                  </td>\n                  <td class="text-center">\n                    <a ng-if="invoice.link" ng-href="{{invoice.link}}" target="_blank">\n                      <i class="fa fa-cloud-download"></i>\n                    </a>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </mno-widget-body>\n      </mno-widget>\n    </div>\n  </div>\n</div>\n'),n.put("app/views/reviews/reviews.html",'<div class="row">\n  <div class="col-xs-8 col-lg-offset-1 top-buffer-1">\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-10 col-lg-offset-1 col-md-12">\n    <mnoe-reviews-list></mnoe-reviews-list>\n  </div>\n</div>\n'),n.put("app/views/staff/staff.html",'<div class="row">\n  <div class="col-xs-8 col-lg-offset-1 top-buffer-1">\n    <button role="button" ng-click="vm.staff.createModal()" class="btn btn-primary" translate>\n      mnoe_admin_panel.dashboard.staff.add_staff\n    </button>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-10 col-lg-offset-1 col-md-12">\n    <mnoe-staffs-list view="all"></mnoe-staffs-list>\n  </div>\n</div>\n'),n.put("app/views/user/user.html",'<div class="row">\n  <div class="col-xs-12">\n    <h1><i class="fa fa-users"></i>{{\'mnoe_admin_panel.dashboard.user.subtitle\' | translate}}</h1>\n    <div class="panel panel-default top-buffer-2">\n      <div class="panel-heading" ng-show="vm.user">\n        <h3 ng-show="user.name && user.surname" class="panel-title">{{::vm.user.name}} {{::vm.user.surname}}</h3>\n        <h3 ng-show="!user.name && !user.surname" class="panel-title">{{::vm.user.email}}</h3>\n      </div>\n      <div class="panel-body">\n        <mno-loading-ellipsis ng-show="!vm.user"></mno-loading-ellipsis>\n        <div ng-show="vm.user">\n          <div class="bs-row row">\n            <div class="col-md-3"><div class="label-cell" translate>mnoe_admin_panel.dashboard.user.table.email</div></div>\n            <div class="col-md-3">{{::vm.user.email}}</div>\n          </div>\n          <div class="bs-row row">\n            <div class="col-md-3"><div class="label-cell" translate>mnoe_admin_panel.dashboard.user.table.uid</div></div>\n            <div class="col-md-3">{{::vm.user.uid}}</div>\n          </div>\n          <div class="bs-row row">\n            <div class="col-md-3"><div class="label-cell" translate>mnoe_admin_panel.dashboard.user.table.phone</div></div>\n            <div class="col-md-3">{{vm.user.phone || \'mnoe_admin_panel.dashboard.user.table.phone.none\' | translate}}</div>\n          </div>\n          <div class="bs-row row">\n            <div class="col-sm-3"><div class="label-cell" translate>mnoe_admin_panel.dashboard.user.table.admin_role</div></div>\n            <div class="col-sm-3">{{vm.user.admin_role || \'mnoe_admin_panel.dashboard.user.table.admin_role.none\' | translate}}</div>\n          </div>\n          <div class="bs-row row">\n            <div class="col-sm-3"><div class="label-cell" translate>mnoe_admin_panel.dashboard.user.table.creation_date</div></div>\n            <div class="col-sm-3">{{vm.user.created_at | amCalendar }}</div>\n          </div>\n          <div class="bs-row row">\n            <div class="col-sm-3"><div class="label-cell" translate>mnoe_admin_panel.dashboard.user.table.confirmed</div></div>\n            <div class="col-sm-3">{{(vm.user.confirmed_at | amCalendar) || \'mnoe_admin_panel.dashboard.user.table.never_confirmed\' | translate}}</div>\n          </div>\n          <div class="bs-row row">\n            <div class="col-sm-3"><div class="label-cell" translate>mnoe_admin_panel.dashboard.user.table.last_sign_in</div></div>\n            <div class="col-sm-3">{{(vm.user.last_sign_in_at | amCalendar) || \'mnoe_admin_panel.dashboard.user.table.never_signed_in\' | translate}}</div>\n          </div>\n          <div class="bs-row row">\n            <div class="col-sm-3"><div class="label-cell" translate>mnoe_admin_panel.dashboard.user.table.number_of_sign_in</div></div>\n            <div class="col-sm-3">{{vm.user.sign_in_count}}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="bs-row">\n      <div class="col-sm-4 col-sm-offset-4" ng-if="::main.adminConfig.isImpersonationEnabled()">\n        <button class="btn btn-primary center-block" ng-click="vm.impersonateUser()" translate>mnoe_admin_panel.dashboard.user.login_button</button>\n      </div>\n      <div class="col-sm-12 top-buffer-2">\n        <mnoe-organizations-local-list list="vm.user.organizations" view="all"></mnoe-organizations-local-list>\n      </div>\n    </div>\n  </div>\n</div>\n'),n.put("app/views/customers/app-connect-modal/app-connect-modal-myob.html",'<div id="app-connect-modal">\n  <div class="modal-header">\n    <div class="close" type="button" aria-label="{{\'mnoe_admin_panel.dashboard.customers.connect_app.myob.close\' | translate }}" ng-click="vm.close()"></div>\n    <h3 class="modal-title" translate-values="{app_name: vm.app.name}" translate>mnoe_admin_panel.dashboard.customers.connect_app.myob.title</h3>\n  </div>\n  <div class="modal-body">\n    <h4 class="text-center" translate>mnoe_admin_panel.dashboard.customers.connect_app.myob.version.title</h4>\n    <div class="top-buffer-2"></div>\n\n    <form>\n      <input type="hidden" ng-model="vm.form.perform">\n      <div class="top-buffer-1"></div>\n\n      <div class="form-group text-center">\n        <label translate>mnoe_admin_panel.dashboard.customers.connect_app.myob.version.label</label>\n        <select ng-model="vm.form.version" name="version" ng-options="version.value as version.label | translate for version in vm.versions"></select>\n      </div>\n    </form>\n  </div>\n\n  <div class="modal-footer">\n    <button type="submit" class="btn btn-primary" ng-click="vm.connect(vm.form)" translate>mnoe_admin_panel.dashboard.customers.connect_app.myob.connect</button>\n    <button class="btn btn-default" ng-click="vm.close()" translate>mnoe_admin_panel.dashboard.customers.connect_app.myob.cancel</button>\n  </div>\n</div>\n'),
n.put("app/views/customers/app-connect-modal/app-connect-modal-xero.html",'<div id="app-connect-modal">\n  <div class="modal-header">\n    <div class="close" type="button" aria-label="{{\'mnoe_admin_panel.dashboard.customers.connect_app.xero.close\' | translate}}" ng-click="vm.close()"></div>\n    <h3 class="modal-title" translate-values="{app_name: vm.app.name}" translate>mnoe_admin_panel.dashboard.customers.connect_app.xero.title</h3>\n  </div>\n\n  <div class="modal-body">\n    <h4 class="text-center" translate>mnoe_admin_panel.dashboard.customers.connect_app.xero.description</h4>\n    <div class="top-buffer-1"></div>\n\n    <form>\n      <input type="hidden" ng-model="vm.form.perform">\n      <div class="top-buffer-2"></div>\n      <div class="form-group text-center">\n        <h5 translate>mnoe_admin_panel.dashboard.customers.connect_app.xero.payroll_description</h5>\n        <label translate>mnoe_admin_panel.dashboard.customers.connect_app.xero.payroll</label>\n        <input type="checkbox" ng-model="vm.payroll" name="extra_params[]">\n      </div>\n      <div class="form-group text-center" ng-if="vm.payroll" ng-cloak="true">\n        <h5 translate>mnoe_admin_panel.dashboard.customers.connect_app.xero.country</h5>\n        <select ng-model="vm.form.xero_country" name="xero_country" ng-options="country.value as country.label | translate for country in vm.countries"></select>\n      </div>\n    </form>\n  </div>\n\n  <div class="modal-footer">\n    <button type="submit" class="btn btn-primary" ng-click="vm.connect(vm.form)" translate>mnoe_admin_panel.dashboard.customers.connect_app.xero.connect</button>\n    <button class="btn btn-default" ng-click="vm.close()" translate>mnoe_admin_panel.dashboard.customers.connect_app.xero.cancel</button>\n  </div>\n</div>\n'),n.put("app/views/customers/connect-app/connect-app.html",'<div id="create-step-1">\n  <div class="row">\n    <div class="col-xs-12">\n      <h1 translate>mnoe_admin_panel.dashboard.customers.connect_app.connect_your_customer_apps</h1>\n\n      <mno-widget class="top-buffer-2" is-loading="vm.isLoading" icon="fa-plug fa-cloud" heading="{{\'mnoe_admin_panel.dashboard.customers.connect_app.organization_name_cloud_apps\' | translate:{\'organization_name\': vm.organization.name} }}">\n        <mno-widget-header></mno-widget-header>\n        <mno-widget-body class="no-padding">\n          <table class="table table-layout-fixed">\n            <thead>\n              <tr>\n                <th translate>mnoe_admin_panel.dashboard.customers.connect_app.app</th>\n                <th style="width: 33%" translate>mnoe_admin_panel.dashboard.customers.connect_app.state</th>\n                <th style="width: 75px" translate>mnoe_admin_panel.dashboard.customers.connect_app.action</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr ng-repeat="app in vm.organization.active_apps | filter : {stack: \'connector\'}">\n                <td class="nowrap">\n                  <img class="small-app-logo" ng-src="{{::main.trustSrc(app.app_logo)}}" alt="{{ \'mnoe_admin_panel.dashboard.customers.connect_app.alt_app_logo\' | translate:{\'app_name\': app.name} }}">\n                  <span class="app-name">{{::app.name}}</span>\n                </td>\n                <td>\n                  <div ng-show="!vm.mnoAppInstances.isOauthConnected(app)">\n                    <i class="fa fa-exclamation-triangle text-danger"></i>\n                    <span translate>mnoe_admin_panel.dashboard.customers.connect_app.not_connected</span>\n                  </div>\n                  <div ng-show="vm.mnoAppInstances.isOauthConnected(app)">\n                    <i class="fa fa-check-square-o text-success"></i>\n                    <span translate>mnoe_admin_panel.dashboard.customers.connect_app.connected</span>\n                  </div>\n                </td>\n                <td>\n                  <a class="btn-connect" href="" ng-show="!vm.mnoAppInstances.isOauthConnected(app)" ng-click="vm.connectAppInstance(app)" translate>mnoe_admin_panel.dashboard.customers.connect_app.connect</a>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </mno-widget-body>\n      </mno-widget>\n\n      <button type="button" class="btn btn-primary pull-right top-buffer-2" ui-sref="dashboard.customers.organization({ orgId: vm.orgId })">\n        {{\'mnoe_admin_panel.dashboard.customers.connect_app.next\' | translate}} &nbsp;<i class="fa fa-chevron-right"></i>\n      </button>\n    </div>\n  </div>\n</div>\n'),n.put("app/views/customers/create-step-1/create-step-1.html",'<div id="create-step-1">\n  <div class="row">\n    <div class="col-xs-12">\n      <h1 translate>mnoe_admin_panel.dashboard.customers.create_customer.create_customer</h1>\n\n      <form name="vm.form" novalidate>\n        <mno-widget id="org-form" icon="fa-sitemap" heading="{{\'mnoe_admin_panel.dashboard.customers.create_customer.organization_details\' | translate}}" class="top-buffer-2">\n          <mno-widget-header></mno-widget-header>\n          <mno-widget-body>\n            <div class="flex-container flex-center">\n              <div class="form-group flex-50">\n                <label class="control-label" for="organization-name" translate>mnoe_admin_panel.dashboard.customers.create_customer.organization_name</label>\n                <input id="organization-name" name="{{\'mnoe_admin_panel.dashboard.customers.create_customer.name\' | translate}}" type="text" ng-model="vm.organization.name" class="form-control" required>\n                <div ng-messages="vm.form.name.$error" role="alert" ng-if="vm.form.name.$dirty || vm.form.$submitted">\n                  <p ng-message="required" class="text-danger" translate>mnoe_admin_panel.dashboard.customers.create_customer.required.name</p>\n                  <p ng-message="server" class="help-block" translate-value-error="{{ main.errorHandler.errorMessage(\'name\') }}" translate>mnoe_admin_panel.dashboard.customers.create_customer.error.name</p>\n                </div>\n              </div>\n            </div>\n          </mno-widget-body>\n        </mno-widget>\n\n        <mno-widget ng-if="::main.adminConfig.isAppManagementEnabled()" class="top-buffer-2" is-loading="!vm.marketplace" icon="fa-rocket" heading="{{\'mnoe_admin_panel.dashboard.customers.create_customer.select_your_app\' | translate}}">\n          <mno-widget-header>\n            <input type="text" ng-model="vm.appSearch" placeholder="{{\'mnoe_admin_panel.dashboard.customers.create_customer.search\' | translate}}" class="form-control input-sm search-bar">\n          </mno-widget-header>\n          <mno-widget-body>\n            <div class="apps-container">\n              <div class="app-icon" ng-repeat="app in vm.marketplace.apps | filter:{name: vm.appSearch}">\n                <div class="app-icon-wrapper" ng-click="vm.toggleApp(app)">\n                  <div class="checked" ng-show="app.checked">\n                    <i class="fa fa-check fa-5x"></i>\n                  </div>\n                  <img class="app-logo img-thumbnail" ng-src="{{::main.trustSrc(app.logo)}}" alt="{{\'mnoe_admin_panel.dashboard.customers.create_customer.app_logo\' | translate:{\'app\': app.name} }}" title="{{::app.tiny_description}}">\n                </div>\n                <div class="app-title">\n                  {{::app.name}}\n                </div>\n              </div>\n            </div>\n          </mno-widget-body>\n        </mno-widget>\n\n        <button type="submit" class="btn btn-danger pull-right top-buffer-2" ng-click="vm.submitOrganisation()" ng-disabled="vm.isLoading">\n          <span ng-show="vm.isLoading">\n            <i class="fa fa-spinner fa-pulse fa-fw"></i>\n          </span>\n          {{\'mnoe_admin_panel.dashboard.customers.create_customer.create\' | translate}}\n        </button>\n      </form>\n    </div>\n  </div>\n</div>\n'),n.put("app/views/customers/invite-user-modal/invite-user.html",'<div id="create-user">\n  <div class="modal-header">\n    <h3 class="modal-title" translate>mnoe_admin_panel.dashboard.customers.invite_user_modal.invite_a_user</h3>\n  </div>\n\n  <form name="vm.form.user" novalidate>\n    <div class="modal-body">\n      <div class="row">\n        <div class="col-sm-6 col-sm-offset-3">\n          <input type="email" class="form-control input-sm" id="user-email" ng-model="vm.user.email" placeholder="{{\'mnoe_admin_panel.dashboard.customers.invite_user_modal.email\' | translate}}" aria-label="{{\'mnoe_admin_panel.dashboard.customers.invite_user_modal.email\' | translate}}" required>\n        </div>\n      </div>\n    </div>\n  </form>\n\n  <div class="modal-footer">\n    <div class="row actions">\n      <div class="col-xs-12">\n        <button type="button" ng-click="vm.onSubmit()" ng-disabled="vm.isLoading || vm.form.user.$invalid" class="btn btn-primary">\n          <span ng-show="vm.isLoading"><i class="fa fa-spinner fa-pulse fa-fw"></i></span>\n          {{\'mnoe_admin_panel.dashboard.customers.invite_user_modal.send\' | translate}}\n        </button>\n        <a href="" ng-click="vm.onCancel()"><i class="fa fa-times"></i>{{\'mnoe_admin_panel.dashboard.customers.invite_user_modal.cancel\' | translate}}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),n.put("app/views/organization/add-app-modal/add-app-modal.html",'<div id="add-app-modal">\n  \x3c!-- Modal Header --\x3e\n  <div class="modal-header">\n    <h3 class="modal-title" translate>mnoe_admin_panel.dashboard.organization.add_app.title</h3>\n    <div class="close" type="button" ng-click="vm.closeModal()"></div>\n  </div>\n  \x3c!-- Modal Body --\x3e\n  <div class="modal-body" style="max-height:{{vm.modal_height}}">\n    <div class="alert alert-danger modal-error" ng-if="vm.displayError">\n      <div class="close" type="button" ng-click="vm.closeError()"></div>\n        <strong translate>mnoe_admin_panel.dashboard.organization.add_app.error</strong>\n        {{\'mnoe_admin_panel.dashboard.organization.add_app.error_message\' | translate:{\'app_list\': vm.ListOfApps} }}\n      </div>\n    <div class="apps-search" ng-if="!vm.loading.modal">\n      <input type="search" ng-model="vm.appSearch" placeholder="{{\'mnoe_admin_panel.dashboard.organization.add_app.search\' | translate}}">\n    </div>\n    <div class="apps-container">\n      <div class="app-loader" ng-if="vm.loading.modal">\n        <i class="fa fa-pulse fa-spinner"></i>\n      </div>\n      <div class="app-icon" ng-repeat="app in vm.marketplace.filtered_apps | filter:{name: vm.appSearch}">\n        <div class="app-icon-wrapper" ng-click="vm.toggleApp(app)">\n          <div class="checked" ng-show="app.checked">\n            <i class="fa fa-check fa-5x"></i>\n          </div>\n          <img class="app-logo img-thumbnail" ng-src="{{app.logo}}" alt="{{::app.name}} logo" title="{{::app.tiny_description}}">\n        </div>\n        <div class="app-title">\n          {{::app.name}}\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- Modal Footer --\x3e\n  <div class="modal-footer">\n    <div class="row">\n      <div class="col-md-12">\n        <button ng-click="vm.addApps()" ng-disabled="vm.loading.apps" class="btn btn-primary arrow">\n          <span ng-show="vm.loading.apps"><i class="fa fa-pulse fa-spinner"></i></span>\n          {{\'mnoe_admin_panel.dashboard.organization.add_app.add\' | translate}}\n        </button>\n        <button ng-click="vm.closeModal()" class="btn btn-default" translate>\n          mnoe_admin_panel.dashboard.organization.add_app.cancel\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n'),n.put("app/views/organization/create-user-modal/create-user.html",'<div id="create-user">\n  <div class="modal-header">\n    <h3 class="modal-title" translate>mnoe_admin_panel.dashboard.organization.create_user.add</h3>\n  </div>\n\n  <form name="vm.form.user" novalidate>\n    <div class="modal-body">\n      <div class="row">\n        <div class="col-sm-6">\n          <input type="text" class="form-control input-sm" id="user-first-name" ng-model="vm.user.name" placeholder="{{\'mnoe_admin_panel.dashboard.organization.create_user.form.first_name\' | translate}}" aria-label="{{\'mnoe_admin_panel.dashboard.organization.create_user.form.first_name\' | translate}}" required>\n        </div>\n        <div class="col-sm-6">\n          <input type="text" class="form-control input-sm" id="user-last-name" ng-model="vm.user.surname" placeholder="{{\'mnoe_admin_panel.dashboard.organization.create_user.form.last_name\' | translate}}" aria-label="{{\'mnoe_admin_panel.dashboard.organization.create_user.form.last_name\' | translate}}" required>\n        </div>\n      </div>\n\n      <div class="row top-buffer-1">\n        <div class="col-sm-6">\n          <input type="phone" class="form-control input-sm" id="user-phone" ng-model="vm.user.phone" placeholder="{{\'mnoe_admin_panel.dashboard.organization.create_user.form.phone\' | translate}}" aria-label="{{\'mnoe_admin_panel.dashboard.organization.create_user.form.phone\' | translate}}" required>\n        </div>\n\n        <div class="col-sm-6">\n          <input type="email" class="form-control input-sm" id="user-email" ng-model="vm.user.email" placeholder="{{\'mnoe_admin_panel.dashboard.organization.create_user.form.email\' | translate}}" aria-label="{{\'mnoe_admin_panel.dashboard.organization.create_user.form.email\' | translate}}" required>\n        </div>\n      </div>\n\n      <div class="row">\n        <div class="col-sm-6 col-sm-offset-3">\n          <select ng-model="vm.user.role" class="form-control input-sm top-buffer-1" ng-options="role.value as role.label | translate for role in vm.USER_ROLES" required>\n            <option value="" disabled="disabled" selected="selected" style="display: none" translate>mnoe_admin_panel.dashboard.organization.create_user.form.role</option>\n          </select>\n        </div>\n      </div>\n    </div>\n  </form>\n\n  <div class="modal-footer">\n    <div class="row actions">\n      <div class="col-xs-12">\n        <button type="button" ng-click="vm.onSubmit()" ng-disabled="vm.isLoading || vm.form.user.$invalid" class="btn btn-primary">\n          <span ng-show="vm.isLoading"><i class="fa fa-spinner fa-pulse fa-fw"></i></span>\n          {{\'mnoe_admin_panel.dashboard.organization.create_user.save\' | translate}}\n        </button>\n        <a href="" ng-click="vm.onCancel()"><i class="fa fa-times"></i>{{\'mnoe_admin_panel.dashboard.organization.create_user.cancel\' | translate}}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),n.put("app/views/organization/remove-app-modal/remove-app-modal.html",'<div id="remove-app-modal">\n  \x3c!-- Modal Header --\x3e\n  <div class="modal-header">\n    <h3 class="modal-title" translate translate-values="{ app_name: vm.app.name}">mnoe_admin_panel.dashboard.organization.remove_app.title</h3>\n    <div class="close" type="button" ng-click="vm.closeModal()"></div>\n  </div>\n  \x3c!-- Modal Body --\x3e\n  <div class="modal-body">\n    <p translate>mnoe_admin_panel.dashboard.organization.remove_app.description</p>\n  </div>\n  \x3c!-- Modal Footer --\x3e\n  <div class="modal-footer">\n    <div class="row">\n      <div class="col-md-12">\n        <button ng-click="vm.deleteApp()" class="btn btn-danger arrow" ng-disabled="vm.modal.loading">\n          <span ng-show="vm.modal.loading">\n            <i class="fa fa-pulse fa-spinner"></i>\n          </span>\n          {{\'mnoe_admin_panel.dashboard.organization.remove_app.yes\' | translate}}\n        </button>\n        <button ng-click="vm.closeModal()" class="btn btn-default" translate>\n          mnoe_admin_panel.dashboard.organization.remove_app.no\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n'),n.put("app/views/staff/create-staff-modal/create-staff.html",'<div id="staff-user-modal">\n  <div class="modal-header">\n    <h3 class="modal-title" translate>mnoe_admin_panel.dashboard.staff.add_staff.modal.title</h3>\n  </div>\n\n  <form name="vm.form.user" novalidate>\n    <div class="modal-body">\n      <div class="row">\n        <div class="col-sm-6">\n          <input type="text" class="form-control input-sm" id="user-first-name" ng-model="vm.user.name" placeholder="{{\'mnoe_admin_panel.dashboard.staff.add_staff.modal.placeholder.name\' | translate}}" aria-label="{{\'mnoe_admin_panel.dashboard.staff.add_staff.modal.placeholder.name\' | translate}}" required>\n        </div>\n        <div class="col-sm-6">\n          <input type="text" class="form-control input-sm" id="user-last-name" ng-model="vm.user.surname" placeholder="{{\'mnoe_admin_panel.dashboard.staff.add_staff.modal.placeholder.surname\' | translate}}" aria-label="{{\'mnoe_admin_panel.dashboard.staff.add_staff.modal.placeholder.surname\' | translate}}" required>\n        </div>\n      </div>\n\n      <div class="row top-buffer-1">\n        <div class="col-sm-6">\n          <input type="email" class="form-control input-sm" id="user-email" ng-model="vm.user.email" placeholder="{{\'mnoe_admin_panel.dashboard.staff.add_staff.modal.placeholder.email\' | translate}}" aria-label="{{\'mnoe_admin_panel.dashboard.staff.add_staff.modal.placeholder.email\' | translate}}" required>\n        </div>\n        <div class="col-sm-6">\n          <select ng-model="vm.user.admin_role" class="form-control input-sm" ng-options="role.value as role.label | translate for role in vm.admin_roles" required>\n            <option value="" disabled="disabled" selected="selected" translate>mnoe_admin_panel.dashboard.staff.add_staff.modal.placeholder.role</option>\n          </select>\n        </div>\n      </div>\n    </div>\n  </form>\n\n  <div class="modal-footer">\n    <div class="row actions">\n      <div class="col-xs-12">\n        <button type="button" ng-click="vm.onSubmit()" ng-disabled="vm.isLoading || vm.form.user.$invalid" class="btn btn-primary">\n          <span ng-show="vm.isLoading"><i class="fa fa-spinner fa-pulse fa-fw"></i></span>\n          {{\'mnoe_admin_panel.dashboard.staff.add_staff.modal.save\' | translate}}\n        </button>\n        <a href="" ng-click="vm.onCancel()"><i class="fa fa-times"></i>{{ \'mnoe_admin_panel.dashboard.staff.add_staff.modal.cancel\' | translate}}</a>\n      </div>\n    </div>\n  </div>\n</div>\n')}]);
//# sourceMappingURL=../maps/scripts/app-dae0d24ac7.js.map
